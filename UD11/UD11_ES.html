<!DOCTYPE html>

<html class="no-js" lang="es"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="https://martinezpenya.es/1DAMProgramacion/UD11/UD11_ES.html" rel="canonical"/><link href="../UD10/UD10_T04_DAO_ES.html" rel="prev"/><link href="UD11_ejercicios_ES.html" rel="next"/><link href="../assets/favicon.ico" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/><title>BB.DD. OO - 1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma)</title><link href="../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/><link href="../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%20480c-35.3%200-64-28.7-64-64V96c0-35.3%2028.7-64%2064-64h320c35.3%200%2064%2028.7%2064%2064v213.5c0%2017-6.7%2033.3-18.7%2045.3L322.7%20461.3c-12%2012-28.3%2018.7-45.3%2018.7zm325.5-176H296c-13.3%200-24%2010.7-24%2024v93.5z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M384%20512H96c-53%200-96-43-96-96V96C0%2043%2043%200%2096%200h304c26.5%200%2048%2021.5%2048%2048v288c0%2020.9-13.4%2038.7-32%2045.3V448c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032zM96%20384c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h256v-64zm32-232c0%2013.3%2010.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24H152c-13.3%200-24%2010.7-24%2024m24%2072c-13.3%200-24%2010.7-24%2024s10.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24z%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-32-352a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m-8%2064h48c13.3%200%2024%2010.7%2024%2024v88h8c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-80c-13.3%200-24-10.7-24-24s10.7-24%2024-24h24v-64h-24c-13.3%200-24-10.7-24-24s10.7-24%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M461.2%2018.9C472.7%2024%20480%2035.4%20480%2048v416c0%2012.6-7.3%2024-18.8%2029.1s-24.8%203.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63V480c0%2017.7-14.3%2032-32%2032h-32c-17.7%200-32-14.3-32-32v-96C57.3%20384%200%20326.7%200%20256s57.3-128%20128-128h84.5c61.8-.2%20121.4-22.7%20167.9-63.3L427%2024c9.4-8.3%2022.9-10.2%2034.3-5.1zM224%20320v.2c70.3%202.7%20137.8%2028.5%20192%2073.4V118.3c-54.2%2044.9-121.7%2070.7-192%2073.4z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M434.8%2070.1c14.3%2010.4%2017.5%2030.4%207.1%2044.7l-256%20352c-5.5%207.6-14%2012.3-23.4%2013.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l101.5%20101.5%20234-321.7c10.4-14.3%2030.4-17.5%2044.7-7.1z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m0-336c-17.7%200-32%2014.3-32%2032%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-44.2%2035.8-80%2080-80s80%2035.8%2080%2080c0%2047.2-36%2067.2-56%2074.5v3.8c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-8.1c0-20.5%2014.8-35.2%2030.1-40.2%206.4-2.1%2013.2-5.5%2018.2-10.3%204.3-4.2%207.7-10%207.7-19.6%200-17.7-14.3-32-32-32zm-32%20192a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c14.7%200%2028.2%208.1%2035.2%2021l216%20400c6.7%2012.4%206.4%2027.4-.8%2039.5S486.1%20480%20472%20480H40c-14.1%200-27.2-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9%2020.5-21%2035.2-21m0%20352a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m0-192c-18.2%200-32.7%2015.5-31.4%2033.7l7.4%20104c.9%2012.5%2011.4%2022.3%2023.9%2022.3%2012.6%200%2023-9.7%2023.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M480-16c6.9%200%2013%204.4%2015.2%2010.9l13.5%2040.4%2040.4%2013.5C555.6%2051%20560%2057.1%20560%2064s-4.4%2013-10.9%2015.2l-40.4%2013.5-13.5%2040.4c-2.2%206.5-8.3%2010.9-15.2%2010.9s-13-4.4-15.2-10.9l-13.5-40.4-40.4-13.5C404.4%2077%20400%2070.9%20400%2064s4.4-13%2010.9-15.2l40.4-13.5%2013.5-40.4C467-11.6%20473.1-16%20480-16M321.4%2097.4c12.5-12.5%2032.8-12.5%2045.3%200l80%2080c12.5%2012.5%2012.5%2032.8%200%2045.3l-10.9%2010.9c7.9%2022%2012.2%2045.7%2012.2%2070.5%200%20114.9-93.1%20208-208%20208S32%20418.9%2032%20304%20125.1%2096%20240%2096c24.7%200%2048.5%204.3%2070.5%2012.3zM144%20304c0-53%2043-96%2096-96%2013.3%200%2024-10.7%2024-24s-10.7-24-24-24c-79.5%200-144%2064.5-144%20144%200%2013.3%2010.7%2024%2024%2024s24-10.7%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M416%20427.4c58.5-44%2096-111.6%2096-187.4C512%20107.5%20397.4%200%20256%200S0%20107.5%200%20240c0%2075.8%2037.5%20143.4%2096%20187.4V464c0%2026.5%2021.5%2048%2048%2048h32v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h64v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h32c26.5%200%2048-21.5%2048-48zM96%20256a64%2064%200%201%201%20128%200%2064%2064%200%201%201-128%200m256-64a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M352%200c0-17.7-14.3-32-32-32s-32%2014.3-32%2032v64h-96c-53%200-96%2043-96%2096v224c0%2053%2043%2096%2096%2096h256c53%200%2096-43%2096-96V160c0-53-43-96-96-96h-96zM160%20368c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24M224%20176a48%2048%200%201%201%200%2096%2048%2048%200%201%201%200-96m144%2048a48%2048%200%201%201%2096%200%2048%2048%200%201%201-96%200m-304%200c0-17.7-14.3-32-32-32S0%20206.3%200%20224v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32zm544-32c-17.7%200-32%2014.3-32%2032v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32v-96c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20384%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M277.8%20312.9c9.8-6.7%2023.4-12.5%2023.4-12.5s-38.7%207-77.2%2010.2c-47.1%203.9-97.7%204.7-123.1%201.3-60.1-8%2033-30.1%2033-30.1s-36.1-2.4-80.6%2019c-52.5%2025.4%20130%2037%20224.5%2012.1m-85.4-32.1c-19-42.7-83.1-80.2%200-145.8C296.1%2053.2%20242.9%200%20242.9%200c21.5%2084.5-75.6%20110.1-110.7%20162.6-23.9%2035.9%2011.7%2074.4%2060.2%20118.2M307%20104.6c.1%200-175.2%2043.8-91.5%20140.2%2024.7%2028.4-6.5%2054-6.5%2054s62.7-32.4%2033.9-72.9c-26.9-37.8-47.5-56.6%2064.1-121.3m-6.1%20270.5c-.5%201-1.2%201.8-2%202.6%20128.3-33.7%2081.1-118.9%2019.8-97.3-3.3%201.2-6.2%203.4-8.2%206.3%203.6-1.3%207.3-2.3%2011-3%2031-6.5%2075.5%2041.5-20.6%2091.4m47.1%2062.3s14.5%2011.9-15.9%2021.2c-57.9%2017.5-240.8%2022.8-291.6.7-18.3-7.9%2016-19%2026.8-21.3%2011.2-2.4%2017.7-2%2017.7-2-20.3-14.3-131.3%2028.1-56.4%2040.2C232.8%20509.4%20401%20461.3%20348%20437.4M124.5%20396c-78.7%2022%2047.9%2067.4%20148.1%2024.5q-14.7-5.7-28.2-13.8c-44.7%208.5-65.4%209.1-106%204.5-33.5-3.8-13.9-15.2-13.9-15.2m179.8%2097.2C225.6%20508%20128.5%20506.3%2071%20496.8c0-.1%2011.8%209.7%2072.4%2013.6%2092.2%205.9%20233.8-3.3%20237.1-46.9%200%200-6.4%2016.5-76.2%2029.7M260.7%20353c-59.2%2011.4-93.5%2011.1-136.8%206.6-33.5-3.5-11.6-19.7-11.6-19.7-86.8%2028.8%2048.2%2061.4%20169.5%2025.9-7.8-2.8-15-7.1-21.1-12.8%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20216C0%20149.7%2053.7%2096%20120%2096h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064H64c-35.3%200-64-28.7-64-64zm256%200c0-66.3%2053.7-120%20120-120h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064h-64c-35.3%200-64-28.7-64-64z%22/%3E%3C/svg%3E');}</style><script src="https://unpkg.com/iframe-worker/shim"></script><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../css/extra.css" rel="stylesheet"/><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href="../assets/stylesheets/extra-style.aq9wpnko.min.css" rel="stylesheet"/></head> <body data-md-color-accent="light-blue" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr"> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#bases-de-datos-orientadas-a-objetos"> Saltar a contenido </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav aria-label="Cabecera" class="md-header__inner md-grid"> <a aria-label="1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma)" class="md-header__button md-logo" data-md-component="logo" href=".." title="1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma)"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 6.08s-6.84 1.71-3.56 5.48c.97 1.11-.25 2.11-.25 2.11s2.45-1.25 1.31-2.85c-1.06-1.47-1.86-2.2 2.5-4.74m-4.47 1.2C16.08 4.08 14 2 14 2c.84 3.3-2.96 4.3-4.33 6.36-.94 1.4.46 2.91 2.33 4.64-.71-1.7-3.22-3.16.03-5.72M9.37 17.47c-3.08.86 1.88 2.63 5.79.96-.38-.15-.75-.33-1.1-.54-1.36.31-2.76.37-4.14.18-1.31-.16-.55-.6-.55-.6m5.32-1.68c-1.75.38-3.56.47-5.34.26-1.31-.13-.45-.77-.45-.77-3.4 1.13 1.88 2.4 6.6 1.02-.29-.11-.57-.3-.81-.51m3.42 3.3s.57.47-.61.83c-2.28.68-9.43.89-11.41.03-.71-.31.63-.74 1.05-.83.23-.06.46-.08.69-.08-.79-.54-5.13 1.1-2.19 1.56 7.97 1.3 14.54-.6 12.47-1.51m-2.74-4.86c.29-.19.6-.35.92-.49 0 0-1.51.26-3.02.4-1.6.16-3.21.18-4.81.06-2.35-.31 1.29-1.2 1.29-1.2-1.1 0-2.18.26-3.16.75-2.05 1 5.1 1.45 8.78.48m.9 2.42c-.02.04-.04.07-.08.1 5.01-1.31 3.17-4.64.77-3.81-.13.06-.24.14-.31.25.14-.05.28-.09.43-.12 1.2-.24 2.92 1.63-.81 3.58m.13 4.61c-3.01.52-6.09.56-9.12.14 0 0 .46.38 2.81.53 3.6.23 9.13-.13 9.26-1.83.03.01-.23.65-2.95 1.16"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> 1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma) </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> BB.DD. OO </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Light mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg> </label> <input aria-label="Dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_0" hidden="" title="Dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Búsqueda" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Búsqueda" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label="Buscar" class="md-search__options"> <button aria-label="Limpiar" class="md-search__icon md-icon" tabindex="-1" title="Limpiar" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0"> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Inicializando búsqueda </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/martinezpenya/1DAMProgramacion" title="Ir al repositorio"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <a class="md-header-nav__button md-icon" href="../docs/Libro.pdf" title="PDF">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
<path d="M128,0c-17.6,0-32,14.4-32,32v448c0,17.6,14.4,32,32,32h320c17.6,0,32-14.4,32-32V128L352,0H128z" fill="#E2E5E7"></path>
<path d="m384 128h96l-128-128v96c0 17.6 14.4 32 32 32z" fill="#B0B7BD"></path>
<polygon fill="#CAD1D8" points="480 224 384 128 480 128"></polygon>
<path d="M416,416c0,8.8-7.2,16-16,16H48c-8.8,0-16-7.2-16-16V256c0-8.8,7.2-16,16-16h352c8.8,0,16,7.2,16,16  V416z" fill="#F15642"></path>
<g fill="#fff">
<path d="m101.74 303.15c0-4.224 3.328-8.832 8.688-8.832h29.552c16.64 0 31.616 11.136 31.616 32.48 0 20.224-14.976 31.488-31.616 31.488h-21.36v16.896c0 5.632-3.584 8.816-8.192 8.816-4.224 0-8.688-3.184-8.688-8.816v-72.032zm16.88 7.28v31.872h21.36c8.576 0 15.36-7.568 15.36-15.504 0-8.944-6.784-16.368-15.36-16.368h-21.36z"></path>
<path d="m196.66 384c-4.224 0-8.832-2.304-8.832-7.92v-72.672c0-4.592 4.608-7.936 8.832-7.936h29.296c58.464 0 57.184 88.528 1.152 88.528h-30.448zm8.064-72.912v57.312h21.232c34.544 0 36.08-57.312 0-57.312h-21.232z"></path>
<path d="m303.87 312.11v20.336h32.624c4.608 0 9.216 4.608 9.216 9.072 0 4.224-4.608 7.68-9.216 7.68h-32.624v26.864c0 4.48-3.184 7.92-7.664 7.92-5.632 0-9.072-3.44-9.072-7.92v-72.672c0-4.592 3.456-7.936 9.072-7.936h44.912c5.632 0 8.96 3.344 8.96 7.936 0 4.096-3.328 8.704-8.96 8.704h-37.248v0.016z"></path>
</g>
<path d="m400 432h-304v16h304c8.8 0 16-7.2 16-16v-16c0 8.8-7.2 16-16 16z" fill="#CAD1D8"></path>
</svg>
</a></nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navegación" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma)" class="md-nav__button md-logo" data-md-component="logo" href=".." title="1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma)"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M16.5 6.08s-6.84 1.71-3.56 5.48c.97 1.11-.25 2.11-.25 2.11s2.45-1.25 1.31-2.85c-1.06-1.47-1.86-2.2 2.5-4.74m-4.47 1.2C16.08 4.08 14 2 14 2c.84 3.3-2.96 4.3-4.33 6.36-.94 1.4.46 2.91 2.33 4.64-.71-1.7-3.22-3.16.03-5.72M9.37 17.47c-3.08.86 1.88 2.63 5.79.96-.38-.15-.75-.33-1.1-.54-1.36.31-2.76.37-4.14.18-1.31-.16-.55-.6-.55-.6m5.32-1.68c-1.75.38-3.56.47-5.34.26-1.31-.13-.45-.77-.45-.77-3.4 1.13 1.88 2.4 6.6 1.02-.29-.11-.57-.3-.81-.51m3.42 3.3s.57.47-.61.83c-2.28.68-9.43.89-11.41.03-.71-.31.63-.74 1.05-.83.23-.06.46-.08.69-.08-.79-.54-5.13 1.1-2.19 1.56 7.97 1.3 14.54-.6 12.47-1.51m-2.74-4.86c.29-.19.6-.35.92-.49 0 0-1.51.26-3.02.4-1.6.16-3.21.18-4.81.06-2.35-.31 1.29-1.2 1.29-1.2-1.1 0-2.18.26-3.16.75-2.05 1 5.1 1.45 8.78.48m.9 2.42c-.02.04-.04.07-.08.1 5.01-1.31 3.17-4.64.77-3.81-.13.06-.24.14-.31.25.14-.05.28-.09.43-.12 1.2-.24 2.92 1.63-.81 3.58m.13 4.61c-3.01.52-6.09.56-9.12.14 0 0 .46.38 2.81.53 3.6.23 9.13-.13 9.26-1.83.03.01-.23.65-2.95 1.16"></path></svg> </a> 1º Programacion (CFGS Desarrollo de Aplicaciones Multiplataforma) </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/martinezpenya/1DAMProgramacion" title="Ir al repositorio"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/> <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0"> <span class="md-ellipsis"> UD00 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_1"> <span class="md-nav__icon md-icon"></span> UD00 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../index.html"> <span class="md-ellipsis"> Información importante </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-ellipsis"> UD01 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> UD01 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_ES.html"> <span class="md-ellipsis"> Elementos de un programa informático </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_T01_NoMachine.html"> <span class="md-ellipsis"> T01 NoMachine </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_T02_JDK%26IDE.html"> <span class="md-ellipsis"> T02 JDK e IDE </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_T03_GitHub.html"> <span class="md-ellipsis"> T03 GitHub </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD01/UD01_T04_Markdown.html"> <span class="md-ellipsis"> T04 Markdown </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-ellipsis"> UD02 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> UD02 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD02/UD02_ES.html"> <span class="md-ellipsis"> Utilización de Objetos y Clases </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD02/UD02_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD02/UD02_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> UD03 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> UD03 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD03/UD03_ES.html"> <span class="md-ellipsis"> Estructuras de control y Excepciones </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD03/UD03_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/> <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD03/UD03_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD03/UD03_T02_AceptaElReto.html"> <span class="md-ellipsis"> T02 Acepta el reto </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-ellipsis"> UD04 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> UD04 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD04/UD04_ES.html"> <span class="md-ellipsis"> Estructuras de datos Arrays y matrices. Recursividad </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD04/UD04_anexo_ES.html"> <span class="md-ellipsis"> Anexo Cheatsheet String </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD04/UD04_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_5_4" type="checkbox"/> <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_5_4_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_5_4"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD04/UD04_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-ellipsis"> UD05 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> UD05 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD05/UD05_ES.html"> <span class="md-ellipsis"> Desarrollo de clases </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD05/UD05_anexo_ES.html"> <span class="md-ellipsis"> Anexo Wrappers y Fechas </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD05/UD05_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6_4" type="checkbox"/> <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_4_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_6_4"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD05/UD05_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/> <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-ellipsis"> UD06 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> UD06 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD06/UD06_ES.html"> <span class="md-ellipsis"> Lectura y escritura de información </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD06/UD06_comparativa_CRUD.html"> <span class="md-ellipsis"> Comparativa CRUD </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD06/UD06_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_7_4" type="checkbox"/> <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_7_4_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_7_4"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD06/UD06_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD06/UD06_T02_Sockets_ES.html"> <span class="md-ellipsis"> T02 Sockets en AWS </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/> <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0"> <span class="md-ellipsis"> UD07 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> UD07 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD07/UD07_ES.html"> <span class="md-ellipsis"> Colecciones </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD07/UD07_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_8_3" type="checkbox"/> <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_8_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_8_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD07/UD07_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/> <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0"> <span class="md-ellipsis"> UD08 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_9"> <span class="md-nav__icon md-icon"></span> UD08 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD08/UD08_ES.html"> <span class="md-ellipsis"> Composición, Herencia y Polimorfismo </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD08/UD08_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_9_3" type="checkbox"/> <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_9_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_9_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD08/UD08_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD08/UD08_T02_LibreriasMavenJar_ES.html"> <span class="md-ellipsis"> T02 Librerias Jar vs Maven </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD08/UD08_T03_JSON%26YAML_ES.html"> <span class="md-ellipsis"> T03 Json vs YAML </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/> <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0"> <span class="md-ellipsis"> UD09 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> UD09 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_ES.html"> <span class="md-ellipsis"> Interfaz gráfica </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_10_3" type="checkbox"/> <label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_10_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_10_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_T02_SceneBuilder_IntelliJ_ES.html"> <span class="md-ellipsis"> T02 SceneBuilder &amp; IntelliJ </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_T03_ProyectoJavaFXMaven_ES.html"> <span class="md-ellipsis"> T03 Proyecto JavaFX Maven </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD09/UD09_T04_Calculadora_en_JavaFX_IntelliJ_ES.html"> <span class="md-ellipsis"> T04 Calculadora JavaFX </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/> <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0"> <span class="md-ellipsis"> UD10 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> UD10 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_ES.html"> <span class="md-ellipsis"> BB.DD. relacionales </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_11_3" type="checkbox"/> <label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_11_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_11_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_T02_Conectores_ES.html"> <span class="md-ellipsis"> T02 SceneBuilder &amp; IntelliJ </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_T03_AWS_IntelliJ_ES.html"> <span class="md-ellipsis"> T03 Proyecto JavaFX Maven </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../UD10/UD10_T04_DAO_ES.html"> <span class="md-ellipsis"> T04 Calculadora JavaFX </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_12" type="checkbox"/> <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0"> <span class="md-ellipsis"> UD11 </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="true" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> UD11 </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> BB.DD. OO </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="UD11_ES.html"> <span class="md-ellipsis"> BB.DD. OO </span> </a> <nav aria-label="Tabla de contenidos" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#introduccion"> <span class="md-ellipsis"> Introducción </span> </a> <nav aria-label="Introducción" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#para-evitar-confusiones-utilizamos-el-termino-bdr-para-referirnos-explicitamente-a-una-bd-relacional-y-el-termino-bdoo-para-referirnos-a-una-bd-orientada-a-objetos-de-forma-que-ambos-queden-diferenciados"> <span class="md-ellipsis"> Para evitar confusiones, utilizamos el término BDR para referirnos explícitamente a una BD relacional y el término BDOO para referirnos a una BD orientada a objetos, de forma que ambos queden diferenciados. </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#los-lenguajes-odl-y-oql"> <span class="md-ellipsis"> Los lenguajes ODL y OQL </span> </a> <nav aria-label="Los lenguajes ODL y OQL" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#el-lenguaje-odl"> <span class="md-ellipsis"> El lenguaje ODL </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#el-lenguaje-oql"> <span class="md-ellipsis"> El lenguaje OQL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#la-libreria-objectdb"> <span class="md-ellipsis"> La librería ObjectDB </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="UD11_ejercicios_ES.html"> <span class="md-ellipsis"> Ejercicios </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_12_3" type="checkbox"/> <label class="md-nav__link" for="__nav_12_3" id="__nav_12_3_label" tabindex="0"> <span class="md-ellipsis"> Talleres </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_12_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_12_3"> <span class="md-nav__icon md-icon"></span> Talleres </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="UD11_T01_GitHubClassroom.html"> <span class="md-ellipsis"> T01 GitHub Classroom </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="UD11_T02_ObjectDB_ES.html"> <span class="md-ellipsis"> T02 SceneBuilder &amp; IntelliJ </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="UD11_T03_CRUD_ObjectDB_ES.html"> <span class="md-ellipsis"> T03 Proyecto JavaFX Maven </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../sobremi.html"> <span class="md-ellipsis"> Sobre mi </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../fuentes.html"> <span class="md-ellipsis"> Fuentes de información </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href="https://github.com/martinezpenya/1DAMProgramacion/edit/main/docs/UD11/UD11_ES.md" rel="edit" title="Editar esta página"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <div><h1 id="bases-de-datos-orientadas-a-objetos">Bases de Datos Orientadas a Objetos<a class="headerlink" href="#bases-de-datos-orientadas-a-objetos" title="Permanent link">¶</a></h1> <p><div class="video-container"><iframe allowfullscreen="" alt="type:video" frameborder="0" src="assets/UD11_BBDD_OO.mp4" style="position:relative;width:100%;height:22.172vw"></iframe></div></p> <p><img alt="Diagrama" src="assets/UD11_Diagrama.png"/></p> <h2 id="introduccion">Introducción<a class="headerlink" href="#introduccion" title="Permanent link">¶</a></h2> <p>Si bien las BD relacionales son las más populares y las que más aceptan, su utilización dentro de una aplicación orientada a objetos implica un proceso de traducción del diagrama UML original a un modelo relacional, totalmente basado en tablas. En esta traducción se pierden muchas de las funcionalidades básicas de la orientación a objetos, que deben simularse de algún modo: referencias a objetos, clases asociativas, listas de objetos, herencia, etc. Cuando el diagrama es de cierta complejidad, la traducción puede resultar muy complicada.</p> <p>Para resolver este problema se encuentran las BD orientadas a objetos (BDOO). Éstas, en lugar de organizar los datos en tablas, los organizan exactamente tal y como lo hace un diagrama UML, mediante la definición del conjunto de clases y relaciones entre ellas. Por tanto, no es necesario hacer ninguna traducción.</p> <blockquote> <h3 id="para-evitar-confusiones-utilizamos-el-termino-bdr-para-referirnos-explicitamente-a-una-bd-relacional-y-el-termino-bdoo-para-referirnos-a-una-bd-orientada-a-objetos-de-forma-que-ambos-queden-diferenciados">Para evitar confusiones, utilizamos el término <code>BDR</code> para referirnos explícitamente a una BD relacional y el término <code>BDOO</code> para referirnos a una BD orientada a objetos, de forma que ambos queden diferenciados.<a class="headerlink" href="#para-evitar-confusiones-utilizamos-el-termino-bdr-para-referirnos-explicitamente-a-una-bd-relacional-y-el-termino-bdoo-para-referirnos-a-una-bd-orientada-a-objetos-de-forma-que-ambos-queden-diferenciados" title="Permanent link">¶</a></h3> </blockquote> <p>Actualmente, la aplicación de <code>BDOO</code> se limita a ámbitos muy concretos, especialmente a los vinculados a áreas científicas. Su implantación en aplicaciones comerciales a nivel general es muy baja. Uno de los principales problemas de las BDOO es que los fabricantes tienden a crear soluciones incompatibles, que no obedecen a ninguna especificación concreta. Al contrario que en el caso de las BDR, es muy posible que una aplicación cliente hecha por el producto de un fabricante concreto no funcione sobre una BDOO de otro fabricante. De hecho, a las BDOO que soportan Java no se accede mediante JDBC, puesto que este mecanismo es específico para BDR, sino que normalmente se accede usando bibliotecas específicas para cada fabricante. Java tiene una especificación para BDOO llamada JDO (Java Data Objects).</p> <p>Las <strong>bases de datos <code>NoSQL</code></strong> (<strong>N**ot **O**nly **SQL</strong>) son sistemas de almacenamiento diseñados para manejar datos no estructurados o semiestructurados, destacando por su escalabilidad horizontal, esquemas flexibles y alto rendimiento en entornos distribuidos. Incluyen modelos como documentos (<code>MongoDB</code>), clave-valor (<code>Redis</code>), columnas (<code>Cassandra</code>) y grafos (<code>Neo4j</code>), siendo ideales para Big Data, aplicaciones en tiempo real y escenarios donde las bases relacionales tradicionales resultan inflexibles.</p> <h2 id="los-lenguajes-odl-y-oql">Los lenguajes <code>ODL</code> y <code>OQL</code><a class="headerlink" href="#los-lenguajes-odl-y-oql" title="Permanent link">¶</a></h2> <p>De la misma manera que existe <code>SQL</code> como lenguaje estándar para acceder a una <code>BDR</code> independientemente del fabricante, existe un lenguaje para acceder a los datos de una <code>BDOO</code>: el lenguaje de consultas a objetos (object query language, <code>OQL</code>) . Adicionalmente, existe el lenguaje de descripción de objetos (object description language, <code>ODL</code>), que sirve para especificar el formato de una <code>BDOO</code>: qué tipo de objetos puede contener y sus relaciones. Desgraciadamente, si bien estos lenguajes están especificados, y como ya se ha dicho, no se puede contar con que cualquier fabricante realmente los soporte. De ninguna forma llegan al grado de aceptación de SQL.</p> <h3 id="el-lenguaje-odl">El lenguaje <code>ODL</code><a class="headerlink" href="#el-lenguaje-odl" title="Permanent link">¶</a></h3> <p>El lenguaje <code>ODL</code> se utiliza para definir clases de objetos persistentes en una <code>BDOO</code>, de modo que sus objetos se puedan almacenar. Dentro de la declaración de cada clase se incluye:</p> <ul> <li>El nombre de la clase.</li> <li>Declaraciones opcionales de claves primarias.</li> <li>La declaración de la extensión: el nombre del conjunto de instancias existentes.</li> <li>Declaraciones de elementos: atributos, relaciones o métodos.</li> </ul> <p>La sintaxis es la siguiente (entre corchetes se indican campos opcionales):</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><span class="kd">class</span> <span class="nc">nombreClase</span><span class="w"> </span><span class="o">[</span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="n">nombreClavePrimaria</span><span class="p">)</span><span class="o">]</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-2"><span class="w">    </span><span class="n">attribute</span><span class="w"> </span><span class="n">tipoAtributo</span><span class="w"> </span><span class="n">nombreAtributo</span><span class="p">;</span>
</span><span id="__span-0-3"><span class="w">    </span><span class="p">...</span>
</span><span id="__span-0-4"><span class="w">    </span><span class="n">relationship</span><span class="w"> </span><span class="n">tipo</span><span class="o">&lt;</span><span class="n">nombreClaseDestino</span><span class="o">&gt;</span><span class="w"> </span><span class="n">nombreRelacion</span><span class="p">;</span>
</span><span id="__span-0-5"><span class="w">    </span><span class="p">...</span>
</span><span id="__span-0-6"><span class="w">    </span><span class="n">tipoRetorno</span><span class="w"> </span><span class="nf">nombreMetodo</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="o">[</span><span class="n">raises</span><span class="w"> </span><span class="p">(</span><span class="n">tipoExcepcion</span><span class="p">)</span><span class="o">]</span>
</span><span id="__span-0-7"><span class="w">    </span><span class="p">...</span>
</span><span id="__span-0-8"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>Como puede apreciarse, simplemente es un cambio de sintaxis respecto al lenguaje Java propiamente, pero la mayoría de elementos de una clase son claramente identificables.</p> <p>La única diferencia es la declaración explícita de las relaciones en forma de la palabra clave <code>relationship</code>, en contraste en Java, que se traducen a atributos. Existen diferentes tipos de relaciones según la cardinalidad que se quiere expresar. De hecho, cada uno de estos tipos tiene una cierta correspondencia con las clases que se usan en Java para implementar relaciones. Para cardinalidad 1, basta con poner el nombre de la clase destino. En caso de cardinalidad múltiple, se puede elegir entre distintos tipos:</p> <ul> <li><code>&lt;nombreClaseDestino&gt;</code>, si la relación es sólo a un único objeto.</li> <li><code>Set&lt;nombreClaseDestino&gt;</code>, un conjunto no ordenado sin repeticiones.</li> <li><code>Bag&lt;nombreClaseDestino&gt;</code>, un conjunto no ordenado con repeticiones.</li> <li><code>List&lt;nombreClaseDestino&gt;</code>, un conjunto ordenado con repeticiones, con inserciones eficientes.</li> <li><code>Array&lt;nombreClaseDestino&gt;</code>, un conjunto ordenado con repeticiones.</li> </ul> <p>Su significado es el mismo que el de las clases homónimas de Java (capacidad de haber repeticiones de elementos, ordenadas o no por índice, etc.). Normalmente, la más usada es <code>Set&lt;nombreClaseDestino&gt;</code>.</p> <p>A continuación se muestra cómo podría representarse dos clases interdependientes llamadas <code>Cliente</code> y <code>Encargo</code>, que almacenan datos en una aplicación de gestión de clientes, mediante <code>ODL</code>.</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><span class="kd">class</span> <span class="nf">Cliente</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-2"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-1-3"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span>
</span><span id="__span-1-4"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">direccionPostal</span><span class="p">;</span>
</span><span id="__span-1-5"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">eMail</span><span class="p">;</span>
</span><span id="__span-1-6"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">telefono</span><span class="p">;</span>
</span><span id="__span-1-7">
</span><span id="__span-1-8"><span class="w">     </span><span class="n">relationship</span><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Encargo</span><span class="o">&gt;</span><span class="w"> </span><span class="n">encargos</span><span class="p">;</span>
</span><span id="__span-1-9">
</span><span id="__span-1-10"><span class="w">     </span><span class="n">String</span><span class="w"> </span><span class="nf">getId</span><span class="p">();</span>
</span><span id="__span-1-11"><span class="w">     </span><span class="p">...</span>
</span><span id="__span-1-12"><span class="p">}</span>
</span><span id="__span-1-13">
</span><span id="__span-1-14"><span class="kd">class</span> <span class="nf">Encargo</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
</span><span id="__span-1-15"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</span><span id="__span-1-16"><span class="w">     </span><span class="n">attribute</span><span class="w"> </span><span class="n">LocalDate</span><span class="w"> </span><span class="n">fecha</span><span class="p">;</span>
</span><span id="__span-1-17"><span class="w">     </span><span class="p">...</span>
</span><span id="__span-1-18"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>La representación en UML seria algo parecido a esto:</p> <pre class="mermaid"><code> classDiagram
   Cliente --o Encargo
   class Cliente{
     #int id
     #String nombre
     ...

     #Set~Encargo~ encargos
   }
   class Encargo{
    #int id
    #LocalDate fecha
    ...
   }</code></pre> <p>La herencia entre clases se inicia en su declaración mediante la palabra clave extends seguido del nombre de la superclase:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><span class="kd">class</span> <span class="nc">nombreClase</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">nombreSuperClase</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-2"><span class="w">    </span><span class="p">...</span>
</span><span id="__span-2-3"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <h3 id="el-lenguaje-oql">El lenguaje <code>OQL</code><a class="headerlink" href="#el-lenguaje-oql" title="Permanent link">¶</a></h3> <p>El lenguaje <code>OQL</code> se limita a permitir consultas sobre una <code>BDOO</code>. Su operador principal es <code>SELECT</code>, el cual tiene una gran similitud con el equivalente <code>SQL</code>. Sin embargo, tiene algunas particularidades debidas a la forma en que se estructuran los datos mediante la orientación a objetos (por ejemplo, no hay tablas, por supuesto).</p> <p>La sintaxis general es:</p> <div class="language-sql highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><span class="k">SELECT</span><span class="w"> </span><span class="n">valor1</span><span class="p">,</span><span class="n">valor2</span><span class="p">,...</span>
</span><span id="__span-3-2"><span class="k">FROM</span><span class="w"> </span><span class="n">lista_de_colecciones</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">nombres_para_miembros_típicos</span>
</span><span id="__span-3-3"><span class="k">WHERE</span><span class="w"> </span><span class="n">condición</span>
</span></code></pre></div></td></tr></table></div> <p>Dado que ahora ya no hay tablas, es necesario tener en cuenta dos cosas. Por un lado, la lista de colecciones especificada en el apartado <code>FROM</code> corresponde a alguna de las clases declaradas. Junto al nombre de esta clase se especifica la variable que se utilizará en los términos <code>SELECT</code> y <code>WHERE</code> para referenciar valores. Por otro lado, los valores que se quieren consultar o comparar son atributos de clases, por lo que la forma de referirse a ellos es mediante la nomenclatura: <code>nombreClase.nombreAtributo</code>. Esta posibilidad también puede utilizarse para indicar sus relaciones.</p> <p>Por ejemplo, en una aplicación de gestión de clientes, si se quiere consultar a los clientes de la <code>BDOO</code> de acuerdo con la definición de sus clases, se puede hacer:</p> <div class="language-sql highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><span class="k">SELECT</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">direccionPostal</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">telefono</span>
</span><span id="__span-4-2"><span class="k">FROM</span><span class="w"> </span><span class="n">Clientes</span><span class="w"> </span><span class="k">c</span>
</span><span id="__span-4-3"><span class="k">WHERE</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">nombre</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"Cliente1"</span>
</span></code></pre></div></td></tr></table></div> <p>Esta consulta devuelve la dirección postal y el teléfono del cliente con nombre "Cliente1".</p> <p>También es posible acceder a los encargos por medio de los clientes, siguiendo su relación:</p> <div class="language-sql highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">fecha</span>
</span><span id="__span-5-2"><span class="k">FROM</span><span class="w"> </span><span class="n">Clientes</span><span class="w"> </span><span class="k">c</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">encargos</span><span class="w"> </span><span class="n">e</span>
</span><span id="__span-5-3"><span class="k">WHERE</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">eMail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">"email1@dominio.com"</span>
</span></code></pre></div></td></tr></table></div> <p>Esta consulta devuelve la fecha de todos los encargos del cliente con dirección de correo "<a href="mailto:email1@dominio.com">email1@dominio.com</a>".</p> <h2 id="la-libreria-objectdb">La librería <code>ObjectDB</code><a class="headerlink" href="#la-libreria-objectdb" title="Permanent link">¶</a></h2> <p>A pesar de los esfuerzos por estandarizar el uso de las <code>BDOO</code>, no se puede decir que actualmente haya ningún equivalente al lenguaje <code>SQL</code>. Aunque sobre el papel están <code>ODL</code> y <code>OQL</code>, en la práctica ahora mismo no hay ninguna lengua franca que se pueda garantizar que está soportada, al menos en sus aspectos fundamentales, por todas las bases de datos, todo y que después cada fabricante pueda añadir igualmente sus propias extensiones propietarias. Por tanto, cada tipo de <code>BDOO</code> ofrece su propio sistema para acceder a los objetos almacenados. Afortunadamente, como verá, esto no es muy problemático, ya que la ventaja de usar una <code>BDOO</code> es poder crear código donde operar con objetos persistentes; es casi igual que trabajar con objetos en memoria, y, por tanto, los mecanismos que ofrecen las diferentes <code>BDOO</code> a menudo son muy parecidos a trabajar con objetos directamente en memoria. Lo que varía son las librerías de clases a utilizar, pero no la idea general. En este apartado se verá un caso concreto de acceso a una <code>BDOO</code> llamada <strong><a href="https://www.objectdb.com/">ObjectDB</a></strong></p> <blockquote> <h1 id="objectdb-es-un-potente-sistema-de-gestion-de-bases-de-datos-orientado-a-objetos-odbms-es-compacto-fiable-facil-de-usar-y-extremadamente-rapido-objectdb-proporciona-todos-los-servicios-estandar-de-administracion-de-bases-de-datos-almacenamiento-y-recuperacion-transacciones-administracion-de-bloqueos-procesamiento-de-consultas-etc-pero-de-una-manera-que-facilita-el-desarrollo-y-acelera-las-aplicaciones"><strong>ObjectDB</strong> es un potente sistema de gestión de bases de datos orientado a objetos (<code>ODBMS</code>). Es compacto, fiable, fácil de usar y extremadamente rápido. <strong>ObjectDB</strong> proporciona todos los servicios estándar de administración de bases de datos (almacenamiento y recuperación, transacciones, administración de bloqueos, procesamiento de consultas, etc.), pero de una manera que facilita el desarrollo y acelera las aplicaciones.<a class="headerlink" href="#objectdb-es-un-potente-sistema-de-gestion-de-bases-de-datos-orientado-a-objetos-odbms-es-compacto-fiable-facil-de-usar-y-extremadamente-rapido-objectdb-proporciona-todos-los-servicios-estandar-de-administracion-de-bases-de-datos-almacenamiento-y-recuperacion-transacciones-administracion-de-bloqueos-procesamiento-de-consultas-etc-pero-de-una-manera-que-facilita-el-desarrollo-y-acelera-las-aplicaciones" title="Permanent link">¶</a></h1> <h2 id="caracteristicas-clave-de-la-base-de-datos-objectdb">Características clave de la base de datos <strong>ObjectDB</strong><a class="headerlink" href="#caracteristicas-clave-de-la-base-de-datos-objectdb" title="Permanent link">¶</a></h2> <ul> <li>Sistema de gestión de bases de datos orientado a objetos (ODBMS) 100% puro Java.</li> <li>Sin API propietaria - administrado únicamente por API de Java estándar (JPA 2 / JDO 2).</li> <li>Extremadamente rápido: más rápido que cualquier otro producto JPA/JDO.</li> <li>Adecuado para archivos de bases de datos que van desde kilobytes hasta terabytes.</li> <li>Admite tanto el modo Cliente-Servidor como el modo Integrado.</li> <li>JAR único sin dependencias externas.</li> <li>La base de datos se almacena como un único archivo.</li> <li>Capacidades avanzadas de consulta e indexación.</li> <li>Efectivo en entornos multiusuario con mucha carga.</li> <li>Puede integrarse fácilmente en aplicaciones de cualquier tipo y tamaño.</li> <li>Probado con Tomcat, Jetty, GlassFish, JBoss y Spring.</li> </ul> <h2 id="objectdb-que-es-la-bdoo-elegida-permite-tanto-jdo-como-jpa-java-persistence-api-aunque-parece-que-el-mercado-evoluciona-del-lado-de-jpa-y-es-la-modalidad-mas-usada-para-dotar-de-persistencia-a-los-datos-por-tanto-en-este-tema-usaremos-objectdb-con-jpa"><strong>ObjectDB</strong>, que es la <code>BDOO</code> elegida permite tanto <code>JDO</code> como <code>JPA</code> (Java Persistence API). Aunque parece que el mercado evoluciona del lado de JPA y es la modalidad más usada para dotar de persistencia a los datos. Por tanto en este tema usaremos <strong>ObjectDB</strong> con <strong>JPA</strong>.<a class="headerlink" href="#objectdb-que-es-la-bdoo-elegida-permite-tanto-jdo-como-jpa-java-persistence-api-aunque-parece-que-el-mercado-evoluciona-del-lado-de-jpa-y-es-la-modalidad-mas-usada-para-dotar-de-persistencia-a-los-datos-por-tanto-en-este-tema-usaremos-objectdb-con-jpa" title="Permanent link">¶</a></h2> <h3 id="objectdb-se-puede-descargar-y-utilizar-sin-coste-incluso-comercialmente-con-la-restriccion-de-un-maximo-de-10-clases-de-entidad-y-un-millon-de-objetos-de-entidad-por-archivo-de-base-de-datos-esto-podria-ser-util-para-proyectos-pequenos-tareas-academicas-evaluacion-y-aprendizaje-objectdb-es-un-software-comercial-y-su-uso-sin-estas-restricciones-requiere-la-compra-de-una-licencia"><strong>ObjectDB</strong> se puede descargar y utilizar <strong>sin coste (incluso comercialmente)</strong> con la restricción de un máximo de <strong>10 clases de entidad</strong> y <strong>un millón de objetos de entidad</strong> por archivo de base de datos. Esto podría ser útil para proyectos pequeños, tareas académicas, evaluación y aprendizaje. <strong>ObjectDB</strong> es un software comercial y su uso sin estas restricciones <a href="https://www.objectdb.com/database/license">requiere la compra de una licencia</a>.<a class="headerlink" href="#objectdb-se-puede-descargar-y-utilizar-sin-coste-incluso-comercialmente-con-la-restriccion-de-un-maximo-de-10-clases-de-entidad-y-un-millon-de-objetos-de-entidad-por-archivo-de-base-de-datos-esto-podria-ser-util-para-proyectos-pequenos-tareas-academicas-evaluacion-y-aprendizaje-objectdb-es-un-software-comercial-y-su-uso-sin-estas-restricciones-requiere-la-compra-de-una-licencia" title="Permanent link">¶</a></h3> <p>Se recomienda probar <strong>ObjectDB</strong> antes de comprar una licencia.</p> <p>Más información sobre tipos de licencias: <a href="https://www.objectdb.com/database/purchase">https://www.objectdb.com/database/purchase</a></p> </blockquote> <h3 id="usar-objectdb-con-maven">Usar <code>ObjectDB</code> con <code>Maven</code><a class="headerlink" href="#usar-objectdb-con-maven" title="Permanent link">¶</a></h3> <p>Para usar <code>ObjectDB</code> en nuestros proyectos, lo podemos hacer de manera fácil a través de <code>Maven</code> (consulta talleres anteriores si tienes dudas sobre como usar <code>Maven</code>). Debes añadir un repositorio y una dependencia:</p> <div class="language-xml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1">[...]
</span><span id="__span-6-2"><span class="w">    </span><span class="nt">&lt;repositories&gt;</span>
</span><span id="__span-6-3"><span class="w">        </span><span class="nt">&lt;repository&gt;</span>
</span><span id="__span-6-4"><span class="w">            </span><span class="nt">&lt;id&gt;</span>objectdb<span class="nt">&lt;/id&gt;</span>
</span><span id="__span-6-5"><span class="w">            </span><span class="nt">&lt;name&gt;</span>ObjectDB<span class="w"> </span>Repository<span class="nt">&lt;/name&gt;</span>
</span><span id="__span-6-6"><span class="w">            </span><span class="nt">&lt;url&gt;</span>https://m2.objectdb.com<span class="nt">&lt;/url&gt;</span>
</span><span id="__span-6-7"><span class="w">        </span><span class="nt">&lt;/repository&gt;</span>
</span><span id="__span-6-8"><span class="w">    </span><span class="nt">&lt;/repositories&gt;</span>
</span><span id="__span-6-9">
</span><span id="__span-6-10"><span class="w">    </span><span class="nt">&lt;dependencies&gt;</span>
</span><span id="__span-6-11"><span class="w">        </span><span class="nt">&lt;dependency&gt;</span>
</span><span id="__span-6-12"><span class="w">            </span><span class="nt">&lt;groupId&gt;</span>com.objectdb<span class="nt">&lt;/groupId&gt;</span>
</span><span id="__span-6-13"><span class="w">            </span><span class="nt">&lt;artifactId&gt;</span>objectdb<span class="nt">&lt;/artifactId&gt;</span>
</span><span id="__span-6-14"><span class="w">            </span><span class="nt">&lt;version&gt;</span>2.8.1<span class="nt">&lt;/version&gt;</span>
</span><span id="__span-6-15"><span class="w">        </span><span class="nt">&lt;/dependency&gt;</span>
</span><span id="__span-6-16"><span class="w">    </span><span class="nt">&lt;/dependencies&gt;</span>
</span><span id="__span-6-17">[...]
</span></code></pre></div></td></tr></table></div> <p>Consulta el Taller 1 de esta unidad para realizar una introducción rápida al uso de <code>ObjectDB</code> (con <code>Maven</code>).</p> <h2 id="anotaciones-para-objectdb">Anotaciones para <code>ObjectDB</code><a class="headerlink" href="#anotaciones-para-objectdb" title="Permanent link">¶</a></h2> <p>Como hemos explicado anteriormente, cada BDOO utilitza su propio lenguaje ODL y OQL, a continuación presentaremos el modo de definir la estructura de la BDOO que tiene <code>ObjectDB</code>, insertando anotaciones (palabras reservadas que comienza por <code>@</code>), para definir la estructura y la persistencia de los objetos en la BDOO.</p> <blockquote> <h2 id="aqui-por-su-extension-solo-veremos-una-parte-de-todo-lo-que-se-puede-hacer-con-objectdb-y-jpa-si-te-interesa-profundiza-mas-te-recomiendo-que-acudas-al-manual-online-que-tienen-publicado-en-su-web-y-en-el-que-se-basan-estos-apuntes-httpshouseobjectdbcomjavajpa">Aquí, por su extensión, solo veremos una parte de todo lo que se puede hacer con ObjectDB y JPA, si te interesa profundiza más, te recomiendo que acudas al manual online que tienen publicado en su web, y en el que se basan estos apuntes: <a href="https://house.objectdb.com/java/jpa">https://house.objectdb.com/java/jpa</a><a class="headerlink" href="#aqui-por-su-extension-solo-veremos-una-parte-de-todo-lo-que-se-puede-hacer-con-objectdb-y-jpa-si-te-interesa-profundiza-mas-te-recomiendo-que-acudas-al-manual-online-que-tienen-publicado-en-su-web-y-en-el-que-se-basan-estos-apuntes-httpshouseobjectdbcomjavajpa" title="Permanent link">¶</a></h2> <p><strong>Porqué usamos DBOO y en concreto <code>ObjectDB</code> si requiere la compra de una licencia y además no se usa mucho en el mercado?</strong></p> <p>La ventaja de usar <code>ObjectDB</code> es que es plenamente compatible con <code>JPA</code>, y sus anotaciones son muy similares a las que deberias usar con otros <a href="https://stackoverflow.com/questions/1279613/what-is-an-orm-how-does-it-work-and-how-should-i-use-one"><code>ORM</code></a>, como por ejemplo <a href="https://es.wikipedia.org/wiki/Hibernate"><code>Hibernate</code></a>.</p> <p><code>Hibernate</code> es un <code>ORM</code> que si se usa mucho a nivel comercial, pero no cumple con los requisitos que marca el Real Decreto que regula el ciclo superior de Desarrollo de Aplicaciones Multiplataforma. </p> <p>De esta manera al estudiar <code>ObjectDB</code> nos sirve para cuando necesites usar <code>Hibernate</code> y cubrimos los requisitos del RD.</p> </blockquote> <h3 id="usando-jpa">Usando JPA<a class="headerlink" href="#usando-jpa" title="Permanent link">¶</a></h3> <h4 id="conexion-de-base-de-datos-usando-jpa">Conexión de base de datos usando <code>JPA</code><a class="headerlink" href="#conexion-de-base-de-datos-usando-jpa" title="Permanent link">¶</a></h4> <p>Trabajar con Java Persistence API (JPA) consiste en utilizar las siguientes interfaces:</p> <p><img alt="Interfaces involucradas" src="assets/image.png"/></p> <p><strong>Descripción general</strong></p> <p>Una conexión a una base de datos está representada por una instancia <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a>, que también proporciona funcionalidad para realizar operaciones en una base de datos. Muchas aplicaciones requieren múltiples conexiones a bases de datos durante su vida útil. Por ejemplo, en una aplicación web es común establecer una conexión de base de datos separada, utilizando una instancia "EntityManager" separada, para cada solicitud HTTP.</p> <p>La función principal de una instancia de <a href="https://www.objectdb.com/api/java/jpa/EntityManagerFactory">EntityManagerFactory</a> es admitir la creación de múltiples instancias de <a href="https://www.objectdb.com/api/java%20/jpa/EntityManager">EntityManager</a>. Una <code>EntityManagerFactory</code> se construye para una base de datos específica y, al administrar los recursos de manera eficiente (por ejemplo, un grupo de sockets), proporciona una manera eficiente de construir múltiples instancias de <code>EntityManager</code> para esa base de datos. La creación de instancias de <code>EntityManagerFactory</code> en sí puede ser menos eficiente, pero es una operación única. Una vez construido, puede servir para toda la aplicación.</p> <p>Las operaciones que modifican el contenido de una base de datos requieren transacciones activas. Las transacciones son administradas por una instancia de <a href="https://www.objectdb.com/api/java/jpa/EntityTransaction">EntityTransaction</a> obtenida del <code>EntityManager</code>.</p> <p>Una instancia de <code>EntityManager</code> también funciona como una fábrica para instancias de <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a>, que son necesarias para ejecutar consultas en la base de datos.</p> <p>Cada implementación de JPA define clases que implementan estas interfaces. Cuando utiliza <code>ObjectDB</code>, trabaja con instancias de clases de <code>ObjectDB</code> que implementan estas interfaces y, debido a que se utilizan interfaces JPA estándar, su aplicación es portable.</p> <p><strong><code>EntityManagerFactory</code></strong></p> <p>Una instancia de <a href="https://www.objectdb.com/api/java/jpa/EntityManagerFactory">EntityManagerFactory</a> se obtiene utilizando un método estático de la clase base de JPA, <a href="https://www.objectdb.%20com/api/java/jpa/Persistence">Persistence</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><span class="n">EntityManagerFactory</span><span class="w"> </span><span class="n">emf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Persistence</span><span class="p">.</span><span class="na">createEntityManagerFactory</span><span class="p">(</span><span class="s">"objectdb:myDbFile.odb"</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div> <p>La instancia <a href="https://www.objectdb.com/api/java/jpa/EntityManagerFactory">EntityManagerFactory</a>, cuando se construye, abre la base de datos. Si la base de datos aún no existe, se crea un nuevo archivo de base de datos.</p> <p>Cuando la aplicación termine de usar <code>EntityManagerFactory</code>, debe cerrarse:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><span class="n">emf</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Al cerrar <code>EntityManagerFactory</code>, se cierra el archivo de base de datos.</p> <p><strong>URL de conexión</strong></p> <p>El método <a href="https://www.objectdb.com/api/java/jpa/Persistence/createEntityManagerFactory_String">createEntityManagerFactory</a> toma como argumento el nombre de una <a href="https://www.objectdb.com/java%20/jpa/entity/persistence-unit">unidad de persistencia</a>. Como extensión, <code>ObjectDB</code> permite especificar una URL (o ruta) de base de datos directamente, evitando la necesidad de una unidad de persistencia. <code>ObjectDB</code> considera que cualquier cadena que comience con <code>objectdb:</code> o termine con <code>.odb</code> o <code>.objectdb</code> es una URL de base de datos en lugar de un nombre de unidad de persistencia.</p> <p>Para utilizar <code>ObjectDB</code> integrado directamente en su aplicación (modo integrado), se debe especificar una ruta absoluta o relativa de un archivo de base de datos local (por ejemplo, <code>"my.odb"</code>). Especificar el protocolo <code>objectdb:</code> como prefijo (p. ej., <code>"objectdb:my.odb"</code>) es opcional si la extensión del nombre del archivo de la base de datos es <code>odb</code> u <code>objectdb</code> y es necesario para otras extensiones de nombre de archivo (p. ej., <code>"objectdb:mi-db.tmp"</code>).</p> <p>Para utilizar el modo cliente-servidor, se debe especificar una URL con el formato <code>objectdb://host:puerto/ruta</code>. En este caso, se espera que se ejecute un <a href="https://www.objectdb.com/java/jpa/tool/server">Servidor de base de datos ObjectDB</a> en una máquina llamada host (podría ser un nombre de dominio o una dirección IP) y escuchando en el puerto especificado (el valor predeterminado es 6136 cuando no se especifica). La ruta indica la ubicación del archivo de base de datos en el servidor, en relación con la ruta <a href="https://www.objectdb.com/java/jpa/setting/server#the_data_element">raíz de datos del servidor</a>.</p> <p><strong>Administrador de entidades</strong></p> <p>Una instancia de <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> puede representar una conexión remota a un servidor de base de datos remoto (en modo cliente-servidor) o una conexión local a un archivo de base de datos local (en modo incrustado). La funcionalidad en ambos casos es la misma. Dada una <a href="https://www.objectdb.com/api/java/jpa/EntityManagerFactory">EntityManagerFactory</a> <code>emf</code>, una conexión a corto plazo a la base de datos podría tener la siguiente forma:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><span class="n">EntityManager</span><span class="w"> </span><span class="n">em</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">emf</span><span class="p">.</span><span class="na">createEntityManager</span><span class="p">();</span>
</span><span id="__span-9-2"><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-3"><span class="w">    </span><span class="c1">// TODO: Usar la EntityManager para acceder a la BDOO</span>
</span><span id="__span-9-4"><span class="p">}</span>
</span><span id="__span-9-5"><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-6"><span class="w">    </span><span class="n">em</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
</span><span id="__span-9-7"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>La instancia <code>EntityManager</code> se obtiene de la instancia propietaria <code>EntityManagerFactory</code>. Llamar al método <a href="https://www.objectdb.com/api/java/jpa/EntityManager/close">close</a> es esencial para liberar recursos (como un socket en modo cliente-servidor) a la <code>EntityManagerFactory</code> propietaria. .</p> <p><strong>Entidad de Transacción</strong></p> <p>Las operaciones que afectan el contenido de la base de datos (almacenar, actualizar, eliminar) deben realizarse dentro de una transacción activa. La interfaz <a href="https://www.objectdb.com/api/java/jpa/EntityTransaction">EntityTransaction</a> representa y administra transacciones de bases de datos. Cada <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> contiene una única instancia adjunta <code>EntityTransaction</code> que está disponible a través de <a href="https://www.objectdb.com/%20api/java/jpa/EntityManager/getTransaction">getTransaction()</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><span class="k">try</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-2"><span class="w">    </span><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-10-3"><span class="w">    </span><span class="c1">// Operaciones que modifican la base de datos se realizan aquí.</span>
</span><span id="__span-10-4"><span class="w">    </span><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span><span id="__span-10-5"><span class="p">}</span>
</span><span id="__span-10-6"><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-7"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">isActive</span><span class="p">())</span>
</span><span id="__span-10-8"><span class="w">        </span><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">rollback</span><span class="p">();</span>
</span><span id="__span-10-9"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>Una transacción se inicia con una llamada a <a href="https://www.objectdb.com/api/java/jpa/EntityTransaction/begin">begin</a> y finaliza con una llamada a <a href="https://www.objectdb%20.com/api/java/jpa/EntityTransaction/commit">commit</a> o ​​<a href="https://www.objectdb.com/api/java/jpa/EntityTransaction/rollback">rollback</a>. Todas las operaciones en la base de datos dentro de estos límites están asociadas con esa transacción y se mantienen en la memoria hasta que finaliza la transacción. Si la transacción finaliza con una "reversión" (roll-back), todas las modificaciones a la base de datos se descartan. Sin embargo, de forma predeterminada, la instancia en memoria de la entidad gestionada no se ve afectada por la reversión y no vuelve a su estado modificado previamente.</p> <p>Finalizar una transacción con un "commit" propaga todas las modificaciones físicamente a la base de datos. Si por algún motivo falla una "commit", la transacción se revierte automáticamente (incluidas las modificaciones que ya se han propagado a la base de datos antes del error) y se genera una <a href="https://www.objectdb.com/%20api/java/jpa/RollbackException">RollbackException</a>.</p> <h4 id="trabajar-con-objetos-de-entidad-jpa">Trabajar con objetos de entidad <code>JPA</code><a class="headerlink" href="#trabajar-con-objetos-de-entidad-jpa" title="Permanent link">¶</a></h4> <p>Los objetos de entidad son instancias en memoria de <a href="https://www.objectdb.com/java/jpa/entity/types#entity_classes">clases de entidad</a> (clases persistentes definidas por el usuario), que pueden representar objetos físicos en la base de datos.</p> <p>Administrar una base de datos de objetos <code>ObjectDB</code> usando JPA requiere el uso de objetos de entidad para muchas operaciones, incluido el almacenamiento, recuperación, actualización y eliminación de objetos de la base de datos.</p> <p><strong>Ciclo de vida del objeto de entidad</strong></p> <p>El ciclo de vida de los objetos de entidad consta de cuatro estados: Nuevo, Administrado, Eliminado y Separado.</p> <p><img alt="img" src="assets/ciclo_vida_objeto_entidad.png"/></p> <p>Cuando se crea inicialmente un objeto de entidad, su estado es <strong>Nuevo</strong>. En este estado, el objeto aún no está asociado con un <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> y no tiene representación en la base de datos.</p> <p>Un objeto de entidad pasa a ser <strong>Administrado</strong> cuando persiste en la base de datos a través del método <code>EntityManager's</code> <a href="https://www.objectdb.com/api/java/jpa/EntityManager/persist_Object">persist</a>, que debe ser invocado dentro de una transacción activa. Al confirmar la transacción, el <code>EntityManager</code> propietario almacena el nuevo objeto de entidad en la base de datos.</p> <p>Los objetos de entidad recuperados de la base de datos por un "EntityManager" también están en el estado <strong>Administrado</strong>.</p> <p>Si un objeto de entidad administrada se modifica dentro de una transacción activa, el "EntityManager" propietario detecta el cambio y la actualización se propaga a la base de datos al confirmar la transacción.</p> <p>Un objeto de entidad administrada también se puede recuperar de la base de datos y marcar para su eliminación, utilizando el método <a href="https://www.objectdb.com/api/java/jpa/EntityManager/remove_Object">remove</a> dentro de una transacción activa. El objeto de entidad cambia su estado de Administrado a <strong>Eliminado</strong> y se elimina físicamente de la base de datos durante la confirmación de la transacción.</p> <p>El último estado, <strong>Separado</strong>, representa objetos de entidad que se han desconectado del <code>EntityManager</code>. Por ejemplo, todos los objetos administrados de un "EntityManager" se desconectan cuando se cierra el "EntityManager".</p> <p><strong>El contexto de persistencia</strong></p> <p>El contexto de persistencia es la colección de todos los objetos administrados de un "EntityManager". Si un objeto de entidad que debe recuperarse ya existe en el contexto de persistencia, el objeto de entidad gestionado existente se devuelve sin acceder realmente a la base de datos (excepto la recuperación mediante <a href="https://www.objectdb.com/api/java/%20jpa/EntityManager/refresh_Object_LockModeType">refresh</a>, que siempre requiere acceder a la base de datos).</p> <p>El contexto de persistencia se puede borrar utilizando el método <a href="https://www.objectdb.com/api/java/jpa/EntityManager/clear">clear</a>: </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><span class="n">em</span><span class="p">.</span><span class="na">clear</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Cuando se borra el contexto de persistencia, todas sus entidades administradas se desconectan y se descarta cualquier cambio en los objetos de entidad que no se hayan vaciado a la base de datos.</p> <h3 id="clases-de-entidad-jpa">Clases de entidad <code>JPA</code><a class="headerlink" href="#clases-de-entidad-jpa" title="Permanent link">¶</a></h3> <h4 id="clases-de-entidad">Clases de entidad<a class="headerlink" href="#clases-de-entidad" title="Permanent link">¶</a></h4> <p>Una clase de entidad es una clase Java ordinaria definida por el usuario cuyas instancias se pueden almacenar en la base de datos. La forma sencilla de declarar una clase como entidad es marcarla con la anotación <a href="https://www.objectdb.com/api/java/jpa/Entity">@Entity</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.persistence.*</span><span class="p">;</span>
</span><span id="__span-12-2">
</span><span id="__span-12-3"><span class="nd">@Entity</span>
</span><span id="__span-12-4"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Entidad</span><span class="w"> </span><span class="p">{</span>
</span></code></pre></div></td></tr></table></div> <p><strong>Requisitos de clase de entidad</strong></p> <p>Una clase de entidad JPA persistente:</p> <ul> <li>debe ser una clase de nivel superior (es decir, no una clase anidada/interna).</li> <li>debe tener un constructor sin argumentos <code>público</code> o <code>protegido</code>.</li> <li>no puede ser <code>final</code> y no puede tener métodos "finales" o variables de instancia "finales".</li> </ul> <p><code>ObjectDB</code> es un poco menos restrictivo:</p> <ul> <li>Se permiten clases de entidades anidadas estáticas (se prohíben las clases internas no estáticas).</li> <li>Las variables de instancia (no estáticas) no pueden ser finales, pero las clases y métodos pueden ser finales.</li> <li>En la mayoría de los casos, <code>ObjectDB</code> puede superar la falta de un constructor sin argumentos.</li> </ul> <p>Aparte de estas restricciones, una clase de entidad es como cualquier otra clase de Java. Puede extender otra clase de entidad o una clase definida por el usuario que no sea una entidad (pero no clases del sistema, como <code>ArrayList</code>) e implementar cualquier interfaz. Puede contener constructores, métodos, campos y tipos anidados con cualquier modificador de acceso (público, protegido, paquete o privado) y puede ser concreta o abstracta.</p> <h4 id="tipos-de-datos-java-simples">Tipos de datos Java simples<a class="headerlink" href="#tipos-de-datos-java-simples" title="Permanent link">¶</a></h4> <p>Todos los siguientes tipos de datos Java simples son persistentes:</p> <ul> <li>Tipos primitivos: <code>boolean</code>, <code>byte</code>, <code>short</code>, <code>char</code>, <code>int</code>, <code>long</code>, <code>float</code> y <code>double</code>.</li> <li>Clases contenedoras (<code>Wrappers</code>) equivalentes del paquete <code>java.lang</code>: <code>Boolean</code>, <code>Byte</code>, <code>Short</code>, <code>Char</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code> y <code>Double</code>.</li> <li><code>java.math.BigInteger</code>, <code>java.math.BigDecimal</code>.</li> <li><code>java.lang.String</code>.</li> <li><code>java.util.Date</code>, <code>java.util.Calendar</code>, <code>java.sql.Date</code>, <code>java.sql.Time</code>, <code>java.sql.Timestamp</code>.</li> </ul> <p>Los tipos de fecha y hora se analizan con más detalle en el siguiente párrafo.</p> <h4 id="tipos-de-fecha-y-hora-temporales">Tipos de fecha y hora (temporales)<a class="headerlink" href="#tipos-de-fecha-y-hora-temporales" title="Permanent link">¶</a></h4> <p>Las clases de fecha y hora <code>java.sql</code> representan diferentes partes de fechas y horas:</p> <ul> <li><code>java.sql.Date</code>: representa solo la fecha (por ejemplo, <code>2019-12-31</code>).</li> <li><code>java.sql.Time</code>: representa solo el tiempo (por ejemplo, <code>23:59:59</code>).</li> <li><code>java.sql.Timestamp</code>: representa la fecha y la hora (por ejemplo, <code>2019-12-31 23:59:59</code>).</li> </ul> <p>Los tipos <code>java.util.Date</code> y <code>java.util.Calendar</code>, por otro lado, son genéricos y pueden representar cualquiera de los anteriores, usando la anotación <a href="https://www.objectdb.com/%20api/java/jpa/Temporal">@Temporal</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><span class="c1">// Fecha:</span>
</span><span id="__span-13-2"><span class="n">java</span><span class="p">.</span><span class="na">sql</span><span class="p">.</span><span class="na">Date</span><span class="w"> </span><span class="n">date1</span><span class="p">;</span>
</span><span id="__span-13-3"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="w"> </span><span class="n">date2</span><span class="p">;</span>
</span><span id="__span-13-4"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">DATE</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Calendar</span><span class="w"> </span><span class="n">date3</span><span class="p">;</span>
</span><span id="__span-13-5">
</span><span id="__span-13-6"><span class="c1">// Hora:</span>
</span><span id="__span-13-7"><span class="n">java</span><span class="p">.</span><span class="na">sql</span><span class="p">.</span><span class="na">Time</span><span class="w"> </span><span class="n">time1</span><span class="p">;</span>
</span><span id="__span-13-8"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">TIME</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="w"> </span><span class="n">time2</span><span class="p">;</span>
</span><span id="__span-13-9"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">TIME</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Calendar</span><span class="w"> </span><span class="n">time3</span><span class="p">;</span>
</span><span id="__span-13-10">
</span><span id="__span-13-11"><span class="c1">// Fecha y hora:</span>
</span><span id="__span-13-12"><span class="n">java</span><span class="p">.</span><span class="na">sql</span><span class="p">.</span><span class="na">Timestamp</span><span class="w"> </span><span class="n">dateAndTime1</span><span class="p">;</span>
</span><span id="__span-13-13"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">TIMESTAMP</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="w"> </span><span class="n">dateAndTime2</span><span class="p">;</span>
</span><span id="__span-13-14"><span class="nd">@Temporal</span><span class="p">(</span><span class="n">TemporalType</span><span class="p">.</span><span class="na">TIMESTAMP</span><span class="p">)</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Calendar</span><span class="w"> </span><span class="n">dateAndTime3</span><span class="p">;</span>
</span><span id="__span-13-15"><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Date</span><span class="w"> </span><span class="n">dateAndTime4</span><span class="p">;</span><span class="w"> </span><span class="c1">// fecha y hora, no compatible con JPA</span>
</span><span id="__span-13-16"><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">Calendar</span><span class="w"> </span><span class="n">dateAndTime5</span><span class="p">;</span><span class="w"> </span><span class="c1">// fecha y hora, no compatible con JPA</span>
</span></code></pre></div></td></tr></table></div> <p>Fechas puras persistentes (sin la parte de tiempo), ya sea usando el tipo <code>java.sql.Date</code> o especificando <a href="https://www.objectdb.com/api/java/jpa/Temporal">@Temporal</a> La anotación <a href="https://www.objectdb.com/api/java/jpa/TemporalType">TemporalType</a>.<a href="https://www.objectdb.com/api/java/jpa/TemporalType/DATE">DATE</a> tiene varios beneficios:</p> <ul> <li>Ahorra espacio en la base de datos.</li> <li>Es más eficiente (el almacenamiento y la recuperación son más rápidos).</li> <li>Simplifica las consultas sobre fechas y rangos de fechas.</li> </ul> <p>Cuando se almacena una entidad, sus campos de fecha y hora se ajustan automáticamente al modo solicitado. Por ejemplo, los campos <code>fecha1</code>, <code>fecha2</code> y <code>fecha3</code> anteriores pueden inicializarse como <code>new Date()</code>, es decir, con fecha y hora. Su parte de tiempo se descarta cuando se almacenan en la base de datos.</p> <h4 id="tipos-de-valores-multiples">Tipos de valores múltiples<a class="headerlink" href="#tipos-de-valores-multiples" title="Permanent link">¶</a></h4> <p>Los siguientes tipos de valores múltiples son persistentes:</p> <ul> <li>Tipos de colección del paquete <code>java.util</code>: <code>ArrayList</code>, <code>Vector</code>, <code>Stack</code>, <code>LinkedList</code>, <code>ArrayDeque</code>, <code>PriorityQueue</code>, <code>HashSet</code>, <code>LinkedHashSet</code>, <code>TreeSet</code>.</li> <li>Tipos de mapas del paquete <code>java.util</code>: <code>HashMap</code>, <code>HashTable</code>, <code>WeakHashMap</code>, <code>IdentityHashMap</code>, <code>LinkedHashMap</code>, <code>TreeMap</code> y <code>Properties</code>.</li> <li>Arrays (incluidos los multidimensionales (Matrices)).</li> </ul> <p>Se admiten tipos de colecciones y mapas tanto genéricos (por ejemplo, <code>ArrayList&lt;String&gt;</code>) como no genéricos (por ejemplo, <code>ArrayList</code>), siempre que sus valores (es decir, elementos en colecciones y matrices y claves y valores en mapas) sean valores nulos o instancias de tipos persistentes.</p> <p>Además de las clases de colección y mapa que son totalmente compatibles con <code>ObjectDB</code>, se puede utilizar cualquier otra clase que implemente <code>java.util.Collection</code> o <code>java.util.Map</code> al almacenar entidades. Si se utiliza una colección o un tipo de mapa no compatible, <code>ObjectDB</code> cambiará a un tipo compatible similar cuando se recuperen los datos de la base de datos.</p> <p>Por ejemplo, el método <code>Arrays.asList</code> devuelve una instancia de un tipo de colección Java interna que no es compatible con <code>ObjectDB</code>. Sin embargo, se puede almacenar la siguiente entidad:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><span class="kd">private</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">palabras</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">"casa"</span><span class="p">,</span><span class="w"> </span><span class="s">"manzana"</span><span class="p">,</span><span class="w"> </span><span class="s">"perro"</span><span class="p">,</span><span class="w"> </span><span class="s">"gato"</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div> <p>Cuando la entidad se recupera de la base de datos, la lista se creará como una "ArrayList". En este caso, es esencial usar una interfaz (<code>List&lt;String&gt;</code>) para el tipo de campo para permitir el cambio al tipo de colección admitido cuando se recupera la entidad. En realidad, JPA requiere declarar campos de mapas y colecciones persistentes solo como tipos de interfaz (es decir, <code>java.util.Collection</code>, <code>java.util.List</code>, <code>java.util.Set</code>, <code>java.util.Map</code>), y Esa también es una buena práctica cuando se trabaja con <code>ObjectDB</code>.</p> <h3 id="campos-de-entidad-jpa">Campos de entidad <code>JPA</code><a class="headerlink" href="#campos-de-entidad-jpa" title="Permanent link">¶</a></h3> <p>Los campos de clases persistentes definidas por el usuario (clases de entidad) se pueden clasificar en los siguientes cinco grupos:</p> <ul> <li>Campos <em>transient</em></li> <li>Campos persistentes</li> <li>Compos incrustables</li> <li>Campos inversos (mapeados por)</li> <li>Campos de clave primaria (ID)</li> <li>Campo de versión</li> </ul> <h4 id="campos-transient">Campos <em>transient</em><a class="headerlink" href="#campos-transient" title="Permanent link">¶</a></h4> <p>Son campos que no participan en la persistencia y sus valores nunca se almacenan en la base de datos (similar a los campos <em>transient</em> en Java que no participan en la serialización). Los campos de entidad estática y final siempre se consideran <em>transient</em>. Otros campos se pueden declarar explícitamente como <em>transient</em> usando el modificador <code>transient</code> de Java (que también afecta la serialización) o la anotación JPA <a href="https://www.objectdb.com/api/java/jpa/Transient">@Transient</a> (que sólo afecta la persistencia):</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">transient1</span><span class="p">;</span><span class="w"> </span><span class="c1">// no persistente por ser estático</span>
</span><span id="__span-15-2"><span class="kd">final</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">transient2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// no persistente por ser final</span>
</span><span id="__span-15-3"><span class="kd">transient</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">transient3</span><span class="p">;</span><span class="w"> </span><span class="c1">// no persistente por ser transient</span>
</span><span id="__span-15-4"><span class="nd">@Transient</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">transient4</span><span class="p">;</span><span class="w"> </span><span class="c1">// no persistente por el uso de la etiqueta @Transient</span>
</span></code></pre></div></td></tr></table></div> <p>El ejemplo anterior contiene solo campos de entidad <em>transient</em> (no persistentes) sin contenido real para almacenar en la base de datos.</p> <h4 id="campos-persistentes">Campos persistentes<a class="headerlink" href="#campos-persistentes" title="Permanent link">¶</a></h4> <p>Cada campo de entidad no estático y no final es persistente de forma predeterminada a menos que se especifique explícitamente lo contrario (por ejemplo, mediante el uso de la anotación <a href="https://www.objectdb.com/api/java/jpa/Transient">@Transient</a>).</p> <p>Almacenar un objeto de entidad en la base de datos no almacena métodos ni código. Sólo se almacena el estado persistente del objeto de entidad, tal como lo reflejan sus campos persistentes (incluidos los campos persistentes que se heredan de las clases antecesoras).</p> <p>Cuando un objeto de entidad se almacena en la base de datos, cada campo persistente debe contener "nulo" o un valor de uno de los <a href="https://www.objectdb.com/java/jpa/entity/types">tipos persistentes</a> admitidos. <code>ObjectDB</code> admite campos persistentes con cualquier tipo estático declarado, incluido un <code>java.lang.Object</code> genérico, siempre que el tipo del valor real en tiempo de ejecución sea persistente (o <code>null</code>).</p> <p>Cada campo persistente se puede marcar con una de las siguientes anotaciones:</p> <ul> <li><a href="https://www.objectdb.com/api/java/jpa/OneToOne">OneToOne</a>, <a href="https://www.objectdb.com/api/java/jpa/ManyToOne">ManyToOne</a> - para referencias de tipos de entidad.</li> <li><a href="https://www.objectdb.com/api/java/jpa/OneToMany">OneToMany</a>, <a href="https://www.objectdb.com/api/java/jpa/ManyToMany">ManyToMany</a> - para colecciones y mapas de tipos de entidades.</li> <li><a href="https://www.objectdb.com/api/java/jpa/Basic">Básico</a> para cualquier otro tipo persistente.</li> </ul> <p>En JPA solo <a href="https://www.objectdb.com/api/java/jpa/Basic">Básico</a> es opcional, mientras que las otras anotaciones anteriores son obligatorias cuando corresponda. <code>ObjectDB</code>, sin embargo, no exige el uso de ninguna de estas anotaciones, por lo que son útiles sólo para clases que también se utilizan con un proveedor ORM JPA (como Hibernate) o para cambiar la configuración de campo predeterminada. Por ejemplo:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><span class="nd">@Basic</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="kc">false</span><span class="p">)</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">campo1</span><span class="p">;</span>
</span><span id="__span-16-2"><span class="nd">@OneToOne</span><span class="p">(</span><span class="n">cascade</span><span class="o">=</span><span class="n">CascadeType</span><span class="p">.</span><span class="na">ALL</span><span class="p">)</span><span class="w"> </span><span class="n">Entidad</span><span class="w"> </span><span class="n">campo2</span><span class="p">;</span>
</span><span id="__span-16-3"><span class="nd">@OneToMany</span><span class="p">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="p">.</span><span class="na">EAGER</span><span class="p">)</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Entidad</span><span class="o">&gt;</span><span class="w"> </span><span class="n">campo3</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div> <p>La declaración de clase de entidad anterior demuestra el uso de anotaciones de campos y relaciones para cambiar el comportamiento predeterminado. Los valores "nulo" están permitidos de forma predeterminada. Al especificar "<code>optional=false</code>" (como se ha visto para "campo1") se genera una excepción en cualquier intento de almacenar una entidad con un valor "nulo" en ese campo. Las configuraciones de cascada y recuperación se explican más adelante.</p> <h4 id="campos-incrustables">Campos incrustables<a class="headerlink" href="#campos-incrustables" title="Permanent link">¶</a></h4> <p>Especifica un campo o propiedad persistente de una entidad cuyo valor es una instancia de una clase integrable. La clase integrable debe estar anotada como Integrable.</p> <p>Estan muy relacionados con las clases incrustables.</p> <h4 id="clases-incrustables-embeddable-classes">Clases incrustables (Embeddable Classes)<a class="headerlink" href="#clases-incrustables-embeddable-classes" title="Permanent link">¶</a></h4> <p>Las clases incrustables son clases persistentes definidas por el usuario que funcionan como tipos. Al igual que con otros tipos que no son de entidad, las instancias de una clase <strong>incrustable</strong> solo pueden almacenarse en la base de datos como objetos <strong>embedded</strong>, es decir, como parte de un objeto de entidad.</p> <p>Una clase se declara como <strong>incrustable</strong> marcándola con la anotación <a href="https://www.objectdb.com/api/java/jpa/Embeddable">Embeddable</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><span class="nd">@Embeddable</span>
</span><span id="__span-17-2"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Direccion</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-17-3"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">calle</span><span class="p">;</span>
</span><span id="__span-17-4"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ciudad</span><span class="p">;</span>
</span><span id="__span-17-5"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">pais</span><span class="p">;</span>
</span><span id="__span-17-6"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">codPostal</span><span class="p">;</span>
</span><span id="__span-17-7"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>Y desde el punto de vista de la entidad que incluy este campo usaremos <code>@Embeddable</code>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><span class="nd">@Embedded</span><span class="w"> </span><span class="n">Direccion</span><span class="w"> </span><span class="n">direccion</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div> <p>Las instancias de clases integrables siempre se integran en otros objetos de entidad y no requieren asignación de espacio ni operaciones de almacenamiento y recuperación independientes. Por lo tanto, el uso de clases integrables puede ahorrar espacio en la base de datos y mejorar la eficiencia.</p> <p>Sin embargo, las clases integrables no tienen una identidad (clave principal) propia, lo que conlleva algunas limitaciones (por ejemplo, sus instancias no pueden ser compartidas por diferentes objetos de entidad y no pueden consultarse directamente). Por lo tanto, la decisión de declarar una clase como entidad o integrable debe analizarse caso por caso.</p> <h4 id="campos-inversos">Campos inversos<a class="headerlink" href="#campos-inversos" title="Permanent link">¶</a></h4> <p>Los campos inversos (o mapeados por) contienen datos que no se almacenan como parte de la entidad en la base de datos, pero que aún están disponibles después de su recuperación mediante una consulta automática especial.</p> <blockquote> <h3 id="la-navegacion-a-traves-de-campos-inversos-es-mucho-menos-eficiente-que-la-navegacion-a-traves-de-campos-persistentes-ordinarios-ya-que-requiere-la-ejecucion-de-consultas-los-campos-inversos-son-esenciales-para-los-campos-de-coleccion-cuando-se-usan-implementaciones-orm-jpa-pero-no-cuando-se-usa-objectdb">La navegación a través de campos inversos es <strong>mucho menos eficiente</strong> que la navegación a través de campos persistentes ordinarios, ya que requiere la ejecución de consultas. Los campos inversos son esenciales para los campos de colección cuando se usan implementaciones ORM JPA, <strong>pero no cuando se usa <code>ObjectDB</code></strong>.<a class="headerlink" href="#la-navegacion-a-traves-de-campos-inversos-es-mucho-menos-eficiente-que-la-navegacion-a-traves-de-campos-persistentes-ordinarios-ya-que-requiere-la-ejecucion-de-consultas-los-campos-inversos-son-esenciales-para-los-campos-de-coleccion-cuando-se-usan-implementaciones-orm-jpa-pero-no-cuando-se-usa-objectdb" title="Permanent link">¶</a></h3> </blockquote> <h4 id="campo-de-version">Campo de versión<a class="headerlink" href="#campo-de-version" title="Permanent link">¶</a></h4> <p><code>ObjectDB</code> mantiene un número de versión para cada objeto de entidad. La versión inicial de un nuevo objeto de entidad (cuando se almacena en la base de datos por primera vez) es 1. Por cada transacción en la que se modifica un objeto de entidad, su número de versión aumenta automáticamente en uno. </p> <p>Puede exponer las versiones de los objetos de entidad y hacer que sus valores sean accesibles para su aplicación marcando los campos de versión en sus clases de entidad con la anotación <a href="https://www.objectdb.com/api/java/jpa/Version">@Version</a>. Además, un campo de versión debe tener un tipo numérico:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><span class="nd">@Version</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">version</span><span class="p">;</span>
</span></code></pre></div></td></tr></table></div> <p>Si existe un campo de versión, <code>ObjectDB</code> inyecta automáticamente el valor de la versión en ese campo. Los campos de versión deben ser tratados como de solo lectura por la aplicación y no se deben escribir métodos mutadores en ellos. Solo se permite un campo de versión por clase de entidad. De hecho, un único campo de versión por jerarquía de clases de entidad es suficiente porque las subclases heredan un campo de versión.</p> <h4 id="acceso-a-las-propiedades-atributos">Acceso a las propiedades (atributos)<a class="headerlink" href="#acceso-a-las-propiedades-atributos" title="Permanent link">¶</a></h4> <p>Cuando una entidad se almacena en la base de datos, los datos se extraen de los campos persistentes de esa entidad. Asimismo, cuando se recupera una entidad, los campos persistentes se inicializan con datos de la base de datos.</p> <p>De forma predeterminada, <code>ObjectDB</code> accede a los campos directamente, pero también se admite el acceso a los campos indirectamente como propiedades utilizando los métodos <code>get</code> y <code>set</code>. En algunas implementaciones de <code>JPA</code>, como Hibernate, el uso del acceso a propiedades puede tener algunos beneficios de rendimiento. Este no es el caso de <code>ObjectDB</code>. Por lo tanto, considerando la complejidad adicional que implica configurar y mantener el acceso a la propiedad, generalmente se prefiere el modo de acceso al campo predeterminado.</p> <h3 id="clave-primaria-jpa">Clave primaria <code>JPA</code><a class="headerlink" href="#clave-primaria-jpa" title="Permanent link">¶</a></h3> <p>Cada objeto de entidad que se almacena en la base de datos tiene una clave principal. Una vez asignada, la clave principal no se puede modificar. Representa el objeto de entidad mientras exista en la base de datos.</p> <p>Como base de datos de objetos, <code>ObjectDB</code> admite ID de objetos implícitos, por lo que no se requiere una clave primaria definida explícitamente. Pero <code>ObjectDB</code> también admite claves primarias JPA estándar explícitas, incluidas <a href="https://www.objectdb.com/java/jpa/entity/id#composite_primary_key">claves primarias compuestas</a> y automática <a href="https://www%20.objectdb.com/java/jpa/entity/generated">generación de valores secuenciales</a>. Esta es una característica muy poderosa de <code>ObjectDB</code> que está ausente en otras bases de datos orientadas a objetos.</p> <h4 id="identificacion-de-entidad">Identificación de entidad<a class="headerlink" href="#identificacion-de-entidad" title="Permanent link">¶</a></h4> <p>Cada objeto de entidad en la base de datos se identifica de forma única (y puede <a href="https://www.objectdb.com/java/jpa/persistence/retrieve">recuperarse</a> de la base de datos) mediante la combinación de su tipo y su clave principal. Los valores de clave principal son únicos por clase de entidad. Sin embargo, las instancias de diferentes clases de entidades pueden compartir el mismo valor de clave principal.</p> <p>Sólo los objetos de entidad tienen claves primarias. Las instancias de otros <a href="https://www.objectdb.com/java/jpa/entity/types">tipos persistentes</a> siempre se almacenan como parte de los objetos de entidad que los contienen y no tienen su propia identidad separada.</p> <h4 id="clave-primaria-automatica">Clave primaria automática<a class="headerlink" href="#clave-primaria-automatica" title="Permanent link">¶</a></h4> <p>De forma predeterminada, la clave principal es un número secuencial de 64 bits (<code>long</code>) que <code>ObjectDB</code> establece automáticamente para cada nuevo objeto de entidad que se almacena en la base de datos. La clave principal del primer objeto de entidad en la base de datos es 1, la clave principal del segundo objeto de entidad es 2, etc. Los valores de clave principal <strong>no</strong> se reciclan cuando los objetos de entidad se eliminan de la base de datos.</p> <p>Se puede acceder al valor de clave principal de una entidad declarando un campo de clave principal:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><span class="nd">@Id</span><span class="w"> </span><span class="nd">@GeneratedValue</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">id</span><span class="p">;</span><span class="w"> </span><span class="c1">// Es generado por ObjectDB</span>
</span></code></pre></div></td></tr></table></div> <p>La anotación <a href="https://www.objectdb.com/api/java/jpa/Id">@Id</a> marca un campo como campo de clave principal. Cuando se define un campo de clave principal, <code>ObjectDB</code> inyecta automáticamente el valor de la clave principal en ese campo.</p> <p>La anotación <a href="https://www.objectdb.com/api/java/jpa/GeneratedValue">@GeneratedValue</a> especifica que <code>ObjectDB</code> asigna automáticamente la clave principal.</p> <h4 id="clave-principal-del-conjunto-de-aplicaciones">Clave principal del conjunto de aplicaciones<a class="headerlink" href="#clave-principal-del-conjunto-de-aplicaciones" title="Permanent link">¶</a></h4> <p>Si una entidad tiene un campo de clave principal que no está marcado con <a href="https://www.objectdb.com/api/java/jpa/GeneratedValue">@GeneratedValue</a>, el valor de clave principal automático no se genera y la aplicación es responsable de establezca una clave principal inicializando el campo de clave principal. Esto debe hacerse antes de cualquier intento de persistir el objeto de entidad:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><span class="nd">@Id</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">id2</span><span class="p">;</span><span class="w"> </span><span class="c1">// Es generado por la aplicación</span>
</span></code></pre></div></td></tr></table></div> <h3 id="operaciones-crud-con-jpa">Operaciones CRUD con <code>JPA</code><a class="headerlink" href="#operaciones-crud-con-jpa" title="Permanent link">¶</a></h3> <h4 id="almacenamiento-de-objetos-de-entidad-jpa">Almacenamiento de objetos de entidad <code>JPA</code><a class="headerlink" href="#almacenamiento-de-objetos-de-entidad-jpa" title="Permanent link">¶</a></h4> <p><strong>Persistencia explícita</strong></p> <p>El siguiente código almacena una instancia de la clase de entidad "Empleado" en la base de datos:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><span class="c1">//crear empleado</span>
</span><span id="__span-22-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Empleado</span><span class="p">(</span><span class="s">"David"</span><span class="p">,</span><span class="w"> </span><span class="s">"Martinez"</span><span class="p">,</span><span class="w"> </span><span class="s">"Peña"</span><span class="p">);</span>
</span><span id="__span-22-3">
</span><span id="__span-22-4"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-22-5"><span class="n">em</span><span class="p">.</span><span class="na">persist</span><span class="p">(</span><span class="n">empleado</span><span class="p">);</span>
</span><span id="__span-22-6"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>La instancia <code>Empleado</code> se construye como un objeto Java ordinario y su <a href="https://www.objectdb.com/java/jpa/persistence/managed#entity_object_life_cycle">estado</a> inicial es Nuevo. Una llamada explícita a <a href="https://www.objectdb.com/api/java/jpa/EntityManager/persist_Object">persist</a> asocia el objeto con un <a href="https://www.objectdb.com/api/%20java/jpa/EntityManager">EntityManager</a> <code>em</code> y cambia su estado a <strong>Administrado</strong>. El nuevo objeto de entidad se almacena en la base de datos cuando se confirma la transacción.</p> <p><strong>Objetos incrustados referenciados</strong></p> <p>El siguiente código almacena una instancia de "<code>Empleado</code>" con una referencia a una instancia de "<code>Direccion</code>":</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><span class="c1">//crear empleado con dirección</span>
</span><span id="__span-23-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Empleado</span><span class="p">(</span><span class="s">"David"</span><span class="p">,</span><span class="w"> </span><span class="s">"Martinez"</span><span class="p">,</span><span class="w"> </span><span class="s">"Peña"</span><span class="p">);</span>
</span><span id="__span-23-3"><span class="n">Direccion</span><span class="w"> </span><span class="n">direccion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Direccion</span><span class="p">(</span><span class="s">"Carlet"</span><span class="p">,</span><span class="w"> </span><span class="s">"España"</span><span class="p">);</span>
</span><span id="__span-23-4"><span class="n">empleado2</span><span class="p">.</span><span class="na">setDireccion</span><span class="p">(</span><span class="n">direccion</span><span class="p">);</span>
</span><span id="__span-23-5">
</span><span id="__span-23-6"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-23-7"><span class="n">em</span><span class="p">.</span><span class="na">persist</span><span class="p">(</span><span class="n">empleado2</span><span class="p">);</span>
</span><span id="__span-23-8"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Las instancias de <a href="https://www.objectdb.com/java/jpa/entity/types">tipos persistentes</a> que no sean clases de entidad se almacenan automáticamente incrustadas en los objetos de entidad que las contienen. Por lo tanto, si <code>Dirección</code> se define como una <a href="https://www.objectdb.com/java/jpa/entity/types#embeddable_classes">clase incrustable</a>, el objeto de entidad <code>Empleado</code> se almacena automáticamente en la base de datos con su instancia de <code>Direccion</code> como un objeto incrustado.</p> <p>Tenga en cuenta que los objetos incrustados no pueden ser compartidos por varios objetos de entidad. Cada objeto de entidad contenedora debe tener sus propios objetos incrustados.</p> <h4 id="recuperar-objetos-de-entidad-jpa">Recuperar objetos de entidad <code>JPA</code><a class="headerlink" href="#recuperar-objetos-de-entidad-jpa" title="Permanent link">¶</a></h4> <p>La API de persistencia de Java (JPA) proporciona varias formas de recuperar objetos de la base de datos. La recuperación de objetos no requiere una transacción activa porque no cambia el contenido de la base de datos.</p> <p><strong>Recuperación por clase y clave principal</strong></p> <p>Cada objeto de entidad puede identificarse y recuperarse de forma única mediante la combinación de su clase y su clave principal. Dado un <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> <code>em</code>, el siguiente fragmento de código demuestra la recuperación de un objeto "<code>Empleado</code>" cuya clave principal es 3:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">find</span><span class="p">(</span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div> <p>No es necesario convertir el objeto recuperado a <code>Empleado</code> porque <a href="https://www.objectdb.com/api/java/jpa/EntityManager/find_Class__Object">find</a> se define como devolver una instancia de la misma clase que toma como primer argumento (usando genéricos).</p> <p><strong>Recuperación mediante Eager Fetch</strong> (Recuperación ansiosa)</p> <p>La recuperación de un objeto de entidad de la base de datos puede provocar la recuperación automática de objetos de entidad adicionales. De forma predeterminada, una operación de recuperación se realiza automáticamente en cascada a través de todos los campos persistentes que no son de colección y de mapa (es decir, a través de relaciones uno a uno y muchos a uno). Por lo tanto, cuando se recupera un objeto de entidad, también se recuperan todos los objetos de entidad a los que se puede acceder desde él mediante la navegación a través de campos persistentes de mapa y no de colección. En teoría, en algunas situaciones extremas esto podría provocar la recuperación de toda la base de datos en la memoria, lo que suele ser inaceptable.</p> <p>Un campo de referencia persistente se puede excluir de esta recuperación automática en cascada mediante el uso de un tipo de recuperación diferida (<strong>Lazy Fetch</strong>):</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><span class="nd">@Entity</span>
</span><span id="__span-25-2"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Empleado</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-25-3"><span class="w">    </span><span class="o">[</span><span class="p">...</span><span class="o">]</span>
</span><span id="__span-25-4"><span class="w">    </span><span class="nd">@ManyToOne</span><span class="p">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="p">.</span><span class="na">LAZY</span><span class="p">)</span>
</span><span id="__span-25-5"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Empleado</span><span class="w"> </span><span class="n">gerente</span><span class="p">;</span>
</span><span id="__span-25-6"><span class="w">    </span><span class="o">[</span><span class="p">...</span><span class="o">]</span>
</span></code></pre></div></td></tr></table></div> <p>El valor predeterminado para campos no mapeados y que no son de colección es <a href="https://www.objectdb.com/api/java/jpa/FetchType">FetchType</a>.<a href="https://www.objectdb.com/api/java/%20jpa/FetchType/EAGER">EAGER</a>, lo que indica que la operación de recuperación se realiza en cascada a través del campo. Especificando explícitamente <a href="https://www.objectdb.com/api/java/jpa/FetchType">FetchType</a>.<a href="https://www.objectdb.com/api/java/jpa/FetchType/LAZY">LAZY</a> en ya sea en las anotaciones <a href="https://www.objectdb.com/api/java/jpa/OneToOne">@OneToOne</a> o <a href="https://www.objectdb.com/api/java/jpa/ManyToOne">@ManyToOne</a> excluye el campo de participar en la recuperación en cascada.</p> <p>Por otro lado, la política de recuperación predeterminada de los campos mapeados y colecciones persistentes es <code>FetchType.LAZY</code>. Por lo tanto, de forma predeterminada, cuando se recupera un objeto de entidad, cualquier otro objeto de entidad a los que haga referencia a través de su colección y los campos de mapa no se recuperan con él.</p> <p>Esto se puede cambiar mediante una configuración explícita de <code>FetchType.EAGER</code>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><span class="nd">@Entity</span>
</span><span id="__span-26-2"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Empleado</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-3"><span class="w">    </span><span class="o">[</span><span class="p">...</span><span class="o">]</span>
</span><span id="__span-26-4"><span class="w">    </span><span class="nd">@ManyToMany</span><span class="p">(</span><span class="n">fetch</span><span class="o">=</span><span class="n">FetchType</span><span class="p">.</span><span class="na">EAGER</span><span class="p">)</span>
</span><span id="__span-26-5"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Proyecto</span><span class="o">&gt;</span><span class="w"> </span><span class="n">proyectos</span><span class="p">;</span>
</span><span id="__span-26-6"><span class="w">    </span><span class="o">[</span><span class="p">...</span><span class="o">]</span>
</span><span id="__span-26-7"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p><strong>Recuperación por Navegación y Acceso</strong></p> <p>Se puede acceder libremente a todos los campos persistentes de un objeto de entidad, independientemente de la política de recuperación actual, siempre que el "EntityManager" esté abierto. Esto también incluye campos que hacen referencia a objetos de entidad que aún no se han cargado desde la base de datos y están representados por objetos vacios. Si el <code>EntityManager</code> está abierto cuando se accede por primera vez a un objeto vacio, su contenido se recupera automáticamente de la base de datos y todos sus campos persistentes se inicializan.</p> <p>Desde el punto de vista del desarrollador, parece que todo el esquema de objetos está presente en la memoria. Esta ilusión, que se basa en la activación y recuperación transparente y diferida de objetos por parte de <code>ObjectDB</code>, ayuda a ocultar parte de la interacción directa con la base de datos y facilita la programación de la base de datos.</p> <p>Por ejemplo, después de recuperar una instancia de "Empleado" de la base de datos, el campo "gerente" puede incluir un objeto de entidad "Empleado" vacio:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><span class="c1">//recuperación del nombre del Gerente</span>
</span><span id="__span-27-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">find</span><span class="p">(</span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</span><span id="__span-27-3"><span class="n">Empleado</span><span class="w"> </span><span class="n">gerente3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empleado3</span><span class="p">.</span><span class="na">getGerente</span><span class="p">();</span><span class="w"> </span><span class="c1">// puede estar vacio por el FetchType.LAZY</span>
</span></code></pre></div></td></tr></table></div> <p>Si <code>gerente</code> esta vacío, la activación se produce cuando se accede por primera vez. Por ejemplo: </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><span class="n">String</span><span class="w"> </span><span class="n">nombreGerente</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gerente3</span><span class="p">.</span><span class="na">getNombre</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Acceder a un campo persistente en un objeto vacio (por ejemplo, el nombre del "gerente" en el ejemplo anterior) provoca la recuperación del contenido faltante de la base de datos y la inicialización de todos los campos persistentes.</p> <p>Como se ve, todo el esquema de objetos está disponible para la navegación, independientemente de la política de recuperación. Sin embargo, la política de recuperación sí afecta el rendimiento. </p> <h4 id="actualizacion-de-objetos-de-entidad-jpa">Actualización de objetos de entidad JPA<a class="headerlink" href="#actualizacion-de-objetos-de-entidad-jpa" title="Permanent link">¶</a></h4> <p>La modificación de objetos de entidad existentes que están almacenados en la base de datos se basa en la persistencia transparente, lo que significa que los cambios se detectan y manejan automáticamente.</p> <p><strong>Actualización transparente</strong></p> <p>Una vez que un objeto de entidad se recupera de la base de datos (sin importar de qué manera), simplemente se puede modificar en la memoria desde dentro de una transacción activa:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><span class="c1">//actualizar campo</span>
</span><span id="__span-29-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">find</span><span class="p">(</span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
</span><span id="__span-29-3"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-29-4"><span class="n">empleado4</span><span class="p">.</span><span class="na">setApellido1</span><span class="p">(</span><span class="s">"Otroapellido"</span><span class="p">);</span>
</span><span id="__span-29-5"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>El objeto de entidad se actualiza físicamente en la base de datos cuando se confirma la transacción. Si la transacción se revierte y no se confirma, la actualización se descarta.</p> <p><strong>Seguimiento automático de cambios</strong></p> <p>Como se muestra arriba, una actualización se logra modificando un objeto de entidad gestionada desde dentro de una transacción activa. No se invoca ningún método de <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> para informar la actualización. Por lo tanto, para poder aplicar actualizaciones de la base de datos al confirmar, <code>ObjectDB</code> debe detectar automáticamente los cambios en las entidades administradas. </p> <p>Sin embargo, detectar cambios en las matrices requiere el uso de instantáneas incluso si las clases de entidad están mejoradas. Por lo tanto, por motivos de eficiencia, el comportamiento predeterminado de ObjectDB ignora los cambios de matriz cuando se utilizan clases de entidad mejoradas.</p> <p>Generalmente se recomienda utilizar colecciones en lugar de matrices cuando se utiliza JPA. Las colecciones son más portátiles para las implementaciones ORM JPA y brindan un mejor soporte de seguimiento automático de cambios.</p> <h4 id="eliminacion-de-objetos-de-entidad-jpa">Eliminación de objetos de entidad JPA<a class="headerlink" href="#eliminacion-de-objetos-de-entidad-jpa" title="Permanent link">¶</a></h4> <p>Los objetos de entidad existentes se pueden eliminar de la base de datos ya sea explícitamente invocando el método <a href="https://www.objectdb.com/api/java/jpa/EntityManager/remove_Object">remove</a> o implícitamente como resultado de una operación en cascada.</p> <p><strong>Eliminación explícita</strong></p> <p>Para eliminar un objeto de la base de datos, primero debe recuperarse (sin importar de qué manera) y luego, en una transacción activa, se puede eliminar usando <a href="https://www.objectdb.com/api/%20java/jpa/EntityManager/remove_Object">eliminar</a>:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><span class="c1">//eliminar empleado</span>
</span><span id="__span-30-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">find</span><span class="p">(</span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
</span><span id="__span-30-3"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-30-4"><span class="n">em</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">empleado5</span><span class="p">);</span>
</span><span id="__span-30-5"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>El objeto de entidad se elimina físicamente de la base de datos cuando se confirma la transacción. También se eliminan los objetos incrustados contenidos en el objeto de entidad. Si la transacción se revierte y no se confirma, el objeto no se elimina.</p> <h3 id="consultas-jpa">Consultas JPA<a class="headerlink" href="#consultas-jpa" title="Permanent link">¶</a></h3> <h4 id="api-de-consulta-jpa">API de consulta JPA<a class="headerlink" href="#api-de-consulta-jpa" title="Permanent link">¶</a></h4> <p>Las consultas se representan en JPA 2 mediante dos interfaces: la antigua interfaz <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a>, que era la única interfaz disponible para representar consultas en JPA 1, y la nueva interfaz <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a> que se introdujo en JPA 2. La interfaz <a href="https://www.objectdb.com/api/java%20/jpa/TypedQuery">TypedQuery</a> amplía la interfaz <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a>.</p> <p>En JPA 2, la interfaz <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> debe usarse principalmente cuando el tipo de resultado de la consulta es desconocido o cuando una consulta devuelve resultados polimórficos y el mínimo común conocido. El denominador de todos los objetos resultantes es "Objeto". Cuando se espera un tipo de resultado más específico, las consultas normalmente deben utilizar la interfaz <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a>. Es más fácil <a href="https://www.objectdb.com/java/jpa/query/execute">ejecutar consultas</a> y procesar los resultados de la consulta de forma segura cuando se utiliza la interfaz <code>TypedQuery</code>.</p> <p><strong>Creación de consultas con createQuery</strong></p> <p>Como ocurre con la mayoría de las otras operaciones en JPA, el uso de consultas comienza con un <a href="https://www.objectdb.com/api/java/jpa/EntityManager">EntityManager</a> (representado por <code>em</code> en los siguientes fragmentos de código), que sirve como fábrica tanto para <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> como para <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a> :</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><span class="n">Query</span><span class="w"> </span><span class="n">q1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e"</span><span class="p">);</span>
</span><span id="__span-31-2"><span class="n">List</span><span class="w"> </span><span class="n">results1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q1</span><span class="p">.</span><span class="na">getResultList</span><span class="p">();</span>
</span><span id="__span-31-3">
</span><span id="__span-31-4"><span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">q2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e"</span><span class="p">,</span><span class="w"> </span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-31-5"><span class="n">List</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q2</span><span class="p">.</span><span class="na">getResultList</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>En el código anterior, la misma consulta JPQL que recupera todos los objetos "Empleado" en la base de datos está representada por "q1" y "q2". Al crear una instancia de <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a>, el tipo de resultado esperado debe pasarse como argumento adicional, como se demostró para <code>q2</code>. Debido a que, en este caso, se conoce el tipo de resultado (la consulta devuelve sólo objetos <code>Empleado</code>), se prefiere una <code>TypedQuery</code>.</p> <p>Hay otra ventaja de utilizar <code>TypedQuery</code> en ObjectDB. En el contexto de las consultas anteriores, si aún no hay instancias de "Empleado" en la base de datos y se desconoce la clase "Empleado" como <a href="https://www.objectdb.com/java/jpa/%20entidad/persistence-unit#managed_persistable_classes">una clase de entidad administrada</a> - sólo la variante <code>TypedQuery</code> es válida porque introduce la clase <code>Country</code> en ObjectDB.</p> <p><strong>JPQL dinámico, API de criterios y consultas con nombre</strong></p> <p>La creación de consultas pasando cadenas de consulta JPQL directamente al método <code>createQuery</code>, como se muestra arriba, se denomina en JPA construcción de consultas dinámicas porque la cadena de consulta se puede crear dinámicamente en tiempo de ejecución.</p> <p>La <a href="https://www.objectdb.com/java/jpa/query/criteria">API de criterios JPA</a> proporciona una forma alternativa de crear consultas dinámicas, basadas en objetos Java que representan elementos de consulta (reemplazando JPQL basado en cadenas).</p> <p>JPA también proporciona una forma de crear consultas estáticas, como <a href="https://www.objectdb.com/java/jpa/query/named">consultas con nombre</a>, utilizando <a href="https://www.objectdb.%20com/api/java/jpa/NamedQuery">@NamedQuery</a> y anotaciones <a href="https://www.objectdb.com/api/java/jpa/NamedQueries">@NamedQueries</a>. Se considera una buena práctica en JPA preferir consultas con nombre a consultas dinámicas cuando sea posible.</p> <h4 id="ejecucion-de-consultas-jpa">Ejecución de consultas JPA<a class="headerlink" href="#ejecucion-de-consultas-jpa" title="Permanent link">¶</a></h4> <p>La interfaz <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> define dos métodos para ejecutar consultas SELECT:</p> <ul> <li><a href="https://www.objectdb.com/api/java/jpa/Query/getSingleResult">Query.getSingleResult</a>: para usar cuando se espera exactamente un objeto de resultado.</li> <li><a href="https://www.objectdb.com/api/java/jpa/Query/getResultList">Query.getResultList</a> - para uso general en cualquier otro caso.</li> </ul> <p>De manera similar, la interfaz <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a> define los siguientes métodos:</p> <ul> <li><a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getSingleResult">TypedQuery.getSingleResult</a>: para usar cuando se espera exactamente un objeto de resultado.</li> <li><a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getResultList">TypedQuery.getResultList</a> - para uso general en cualquier otro caso.</li> </ul> <p>Además, la interfaz de consulta define un método para ejecutar consultas DELETE y UPDATE:</p> <ul> <li><a href="https://www.objectdb.com/api/java/jpa/Query/executeUpdate">Query.executeUpdate</a>: para ejecutar solo consultas DELETE y UPDATE.</li> </ul> <p><strong>Ejecución de consulta ordinaria (con getResultList)</strong></p> <p>La siguiente consulta recupera todos los objetos Empleado en la base de datos. La consulta debe ejecutarse utilizando el método <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getResultList">getResultList</a>, ya que esperamos recibir múltiples objetos a cambio:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">q2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e"</span><span class="p">,</span><span class="w"> </span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-32-2"><span class="n">List</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">results2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q2</span><span class="p">.</span><span class="na">getResultList</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Tanto <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> como <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a> definen un <code>getResultList</code> método, pero la versión de <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> devuelve una lista de resultados de un tipo sin formato (no genérico) en lugar de un tipo parametrizado (genérico):</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><span class="n">Query</span><span class="w"> </span><span class="n">q1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e"</span><span class="p">);</span>
</span><span id="__span-33-2"><span class="n">List</span><span class="w"> </span><span class="n">results1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">q1</span><span class="p">.</span><span class="na">getResultList</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Un intento de convertir los <code>resultados</code> anteriores a un tipo parametrizado (<code>List&lt;Country&gt;</code>) provocará una advertencia de compilación. Sin embargo, si se utiliza la nueva interfaz <a href="https://www.objectdb.com/api/java/jpa/TypedQuery">TypedQuery</a>, la conversión no es necesaria y se evita la advertencia.</p> <p>La colección de resultados de la consulta funciona como cualquier otra colección Java normal. Por ejemplo, una colección de resultados de un tipo parametrizado se puede iterar fácilmente utilizando un bucle for mejorado:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">results2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-34-2"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getNombre</span><span class="p">());</span>
</span><span id="__span-34-3"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>Tenga en cuenta que para imprimir solo los nombres de los Empleados, sería necesaria una consulta utilizando <a href="https://www.objectdb.com/java/jpa/query/jpql/select">projection</a> y recuperando los nombres de los empleados directamente en lugar de recuperar las instancias completas del Empleado. más eficiente.</p> <p><strong>Ejecución de consulta de resultado único (con <code>getSingleResult</code>)</strong></p> <p>El método <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getResultList">getResultList</a> (que se analizó anteriormente) también se puede utilizar para ejecutar consultas que devuelven un único objeto de resultado. En este caso, el objeto de resultado debe extraerse de la colección de resultados después de la ejecución de la consulta (por ejemplo, mediante <code>results.get(0)</code>). Para eliminar esta operación de rutina, JPA proporciona un método adicional, <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getSingleResult">getSingleResult</a>, como método más conveniente cuando se espera exactamente un objeto de resultado.</p> <p>La siguiente consulta agregada siempre devuelve un único objeto de resultado, que es un objeto "Long" que refleja el número de objetos "Empleado" en la base de datos:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT COUNT(e) FROM Empleado e"</span><span class="p">,</span><span class="w"> </span><span class="n">Long</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-35-2"><span class="kt">long</span><span class="w"> </span><span class="n">numeroEmpleados</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query3</span><span class="p">.</span><span class="na">getSingleResult</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Tenga en cuenta que cuando una consulta devuelve un único objeto, puede resultar tentador utilizar <a href="https://www.objectdb.com/api/java/jpa/Query">Query</a> en lugar de <a href="https://www.objectdb%20.com/api/java/jpa/TypedQuery">TypedQuery,</a> incluso cuando se conoce el tipo de resultado, porque la conversión de un solo objeto es fácil y el código es simple: </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><span class="kt">long</span><span class="w"> </span><span class="n">numeroEmpleados</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">query3</span><span class="p">.</span><span class="na">getSingleResult</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Una consulta <code>COUNT</code> agregada siempre devuelve un resultado, por definición. En otros casos, nuestra expectativa de obtener un resultado de objeto único podría fallar, dependiendo del contenido de la base de datos. Por ejemplo, se espera que la siguiente consulta devuelva un único objeto Empleado: </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><span class="n">Query</span><span class="w"> </span><span class="n">query4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e WHERE e.nombre='David'"</span><span class="p">);</span>
</span><span id="__span-37-2"><span class="n">Empleado</span><span class="w"> </span><span class="n">empleado6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Empleado</span><span class="p">)</span><span class="w"> </span><span class="n">query4</span><span class="p">.</span><span class="na">getSingleResult</span><span class="p">();</span><span class="w"> </span><span class="c1">//podria provocar una excepción si hay más de un empleado llamado David</span>
</span></code></pre></div></td></tr></table></div> <p>Sin embargo, la exactitud de esta suposición depende del contenido de la base de datos. Si la base de datos contiene varios objetos "Empleado" con el nombre "David", se genera una <a href="https://www.objectdb.com/api/java/jpa/NonUniqueResultException">NonUniqueResultException</a>. Por otro lado, si no hay ningún resultado, se genera una <a href="https://www.objectdb.com/api/java/jpa/NoResultException">NoResultException</a>. Por lo tanto, el uso de <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getSingleResult">getSingleResult</a> requiere cierta precaución y, si existe alguna posibilidad de que se produzcan estas excepciones, deben detectarse y manejarse. .</p> <p><strong>ELIMINAR y ACTUALIZAR ejecución de consultas (con ejecutarActualización)</strong></p> <p>Consultas <a href="https://www.objectdb.com/java/jpa/query/jpql/delete">ELIMINAR</a> y <a href="https://www.objectdb.com/java/jpa/query/jpql/update">ACTUALIZAR</a> se ejecutan utilizando el método <a href="https://www.objectdb.com/api/java/jpa/Query/executeUpdate">executeUpdate</a>.</p> <p>Por ejemplo, la siguiente consulta elimina todas las instancias de "Empleado": </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><span class="c1">//Eliminar instancias de Empleado</span>
</span><span id="__span-38-2"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-38-3"><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"DELETE FROM Empleado"</span><span class="p">).</span><span class="na">executeUpdate</span><span class="p">();</span>
</span><span id="__span-38-4"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>The following query resets the area field in all the Country instances to zero: </p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><span class="c1">//Actualizar todos los Empleados</span>
</span><span id="__span-39-2"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">begin</span><span class="p">();</span>
</span><span id="__span-39-3"><span class="kt">int</span><span class="w"> </span><span class="n">count2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"UPDATE Empleado SET apellido1 = 'Martinez'"</span><span class="p">).</span><span class="na">executeUpdate</span><span class="p">();</span>
</span><span id="__span-39-4"><span class="n">em</span><span class="p">.</span><span class="na">getTransaction</span><span class="p">().</span><span class="na">commit</span><span class="p">();</span>
</span></code></pre></div></td></tr></table></div> <p>Se genera una <a href="https://www.objectdb.com/api/java/jpa/TransactionRequiredException">TransactionRequiredException</a> si no hay ninguna transacción activa.</p> <p>En caso de éxito, el método <code>executeUpdate</code> devuelve la cantidad de objetos que la consulta actualizó o eliminó.</p> <p>La sección Estructura de consulta explica <a href="https://www.objectdb.com/java/jpa/query/jpql/delete">ELIMINAR</a> y <a href="https://www.objectdb.com/java/jpa/query/%20jpql/update">ACTUALIZAR</a> consultas con más detalle.</p> <h4 id="parametros-de-consulta-en-jpa">Parámetros de consulta en JPA<a class="headerlink" href="#parametros-de-consulta-en-jpa" title="Permanent link">¶</a></h4> <p>Los parámetros de consulta permiten la definición de consultas reutilizables. Estas consultas se pueden ejecutar con diferentes valores de parámetros para obtener diferentes resultados. Ejecutar la misma consulta varias veces con diferentes valores de parámetros (argumentos) es más eficiente que usar una nueva cadena de consulta para cada ejecución de consulta, porque elimina la necesidad de compilaciones repetidas de consultas.</p> <p><strong>Parámetros con nombre (:nombre)</strong></p> <p>El siguiente método recupera un objeto "Empleado" de la base de datos por su nombre:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><span class="kd">public</span><span class="w"> </span><span class="n">Empleado</span><span class="w"> </span><span class="nf">getEmpleadoPorNombre</span><span class="p">(</span><span class="n">EntityManager</span><span class="w"> </span><span class="n">em</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-2"><span class="w">    </span><span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e WHERE e.nombre = :nombre"</span><span class="p">,</span><span class="w"> </span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-40-3"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">setParameter</span><span class="p">(</span><span class="s">"nombre"</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">).</span><span class="na">getSingleResult</span><span class="p">();</span>
</span><span id="__span-40-4"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>La cláusula WHERE reduce los resultados de la consulta a objetos "Empleado" cuyo valor del campo de nombre es igual a ":nombre", que es un parámetro que sirve como marcador de posición para un valor real. Antes de que se pueda ejecutar la consulta, se debe establecer un valor de parámetro utilizando el método <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/setParameter_String_Object">setParameter</a>. El método <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/setParameter_String_Object">setParameter</a> admite el encadenamiento de métodos (devolviendo el mismo <a href="https://www.objectdb.com/api/%20java/jpa/TypedQuery">TypedQuery</a> instancia en la que se invocó), por lo que la invocación de <a href="https://www.objectdb.com/api/java/jpa/TypedQuery/getSingleResult">getSingleResult</a> se puede encadenar a la misma expresión.</p> <p>Los parámetros con nombre se pueden identificar fácilmente en una cadena de consulta por su forma especial, que son dos puntos (:) seguidos de un identificador JPQL válido que sirve como nombre del parámetro. JPA no proporciona una API para definir los parámetros explícitamente (excepto cuando se utiliza la API de criterios), por lo que los parámetros de consulta se definen implícitamente al aparecer en la cadena de consulta. El tipo de parámetro se infiere por el contexto. En el ejemplo anterior, una comparación de <code>:nombre</code> con un campo cuyo tipo es <code>String</code> indica que el tipo de <code>:nombre</code> en sí es <code>String</code>.</p> <p>Las consultas pueden incluir varios parámetros y cada parámetro puede aparecer varias veces en la cadena de consulta. Una consulta solo se puede ejecutar después de establecer valores para todos sus parámetros (sin importar el orden).</p> <p><strong>Parámetros ordinales (<code>?indice</code>)</strong></p> <p>Además de los parámetros con nombre, cuya forma es <code>:nombre</code>, JPQL también admite parámetros ordinales, cuya forma es <code>?index</code>. El siguiente método es equivalente al método anterior, excepto que un parámetro ordinal reemplaza al parámetro nombrado:</p> <div class="language-java highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><span class="kd">public</span><span class="w"> </span><span class="n">Empleado</span><span class="w"> </span><span class="nf">getEmpleadoPorNombreOrdinal</span><span class="p">(</span><span class="n">EntityManager</span><span class="w"> </span><span class="n">em</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">nombre</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-41-2"><span class="w">    </span><span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">Empleado</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">em</span><span class="p">.</span><span class="na">createQuery</span><span class="p">(</span><span class="s">"SELECT e FROM Empleado e WHERE e.nombre = ?1"</span><span class="p">,</span><span class="w"> </span><span class="n">Empleado</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</span><span id="__span-41-3"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="na">setParameter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">).</span><span class="na">getSingleResult</span><span class="p">();</span>
</span><span id="__span-41-4"><span class="p">}</span>
</span></code></pre></div></td></tr></table></div> <p>La forma de los parámetros ordinales es un signo de interrogación (?) seguido de un número int positivo. Aparte de la notación diferente, los parámetros con nombre y los parámetros ordinales son idénticos.</p> <p>Los parámetros con nombre pueden proporcionar un valor agregado a la claridad de la cadena de consulta (suponiendo que se seleccionen nombres significativos). Por lo tanto, se prefieren a los parámetros ordinales.</p> <h4 id="api-de-criterios-jpa-frente-a-jpql">API de criterios JPA frente a JPQL<a class="headerlink" href="#api-de-criterios-jpa-frente-a-jpql" title="Permanent link">¶</a></h4> <p>Las consultas JPQL se definen como cadenas, de manera similar a SQL. Las consultas de criterios JPA, por otro lado, se definen mediante la creación de instancias de objetos Java que representan elementos de consulta.</p> <p>Una ventaja importante de utilizar la API de criterios es que los errores se pueden detectar antes, durante la compilación y no en tiempo de ejecución. Por otro lado, para muchos desarrolladores las consultas JPQL basadas en cadenas, que son muy similares a las consultas SQL, son más fáciles de usar y comprender.</p> <p>Para consultas estáticas simples, pueden ser preferibles las consultas JPQL basadas en cadenas (por ejemplo, como <a href="https://www.objectdb.com/java/jpa/query/named">consultas con nombre</a>). Para consultas dinámicas que se crean en tiempo de ejecución, es posible que se prefiera la API de criterios.</p> <p>Por ejemplo, se espera que la creación de una consulta dinámica basada en campos que un usuario completa en tiempo de ejecución en un formulario que contiene muchos campos opcionales sea más limpia cuando se utiliza la API de criterios JPA, porque elimina la necesidad de crear la consulta utilizando muchas concatenaciones de cadenas. operaciones.</p> <p>Las consultas JPQL basadas en cadenas y las consultas basadas en criterios JPA son igualmente poderosas y eficientes. Por tanto, elegir un método u otro también es una cuestión de preferencia personal.</p> <h2 id="comparativa-bdr-vs-bdoo-vs-orm">Comparativa BDR vs BDOO vs ORM<a class="headerlink" href="#comparativa-bdr-vs-bdoo-vs-orm" title="Permanent link">¶</a></h2> <p>Aquí tienes una tabla comparativa con las <strong>características, ventajas e inconvenientes</strong> de las <strong>bases de datos relacionales (RDBMS)</strong>, las <strong>bases de datos de objetos (ODBMS)</strong> y los <strong>ORM (como Hibernate)</strong>:</p> <table> <thead> <tr> <th><strong>Aspecto</strong></th> <th><strong>BD Relacionales (BDR)</strong></th> <th><strong>BD de Objetos (BDOO)</strong></th> <th><strong>ORM (ej: Hibernate)</strong></th> </tr> </thead> <tbody> <tr> <td><strong>Estructura</strong></td> <td>Datos en tablas (filas/columnas)</td> <td>Almacena objetos directamente</td> <td>Mapea objetos ↔ tablas relacionales</td> </tr> <tr> <td><strong>Lenguaje</strong></td> <td>SQL</td> <td>OQL (Object Query Language)</td> <td>API en código OO (Java, C#, etc.)</td> </tr> <tr> <td><strong>Modelo de datos</strong></td> <td>Rígido (esquema definido)</td> <td>Flexible (objetos dinámicos)</td> <td>Adapta objetos a esquema relacional</td> </tr> <tr> <td><strong>Rendimiento</strong></td> <td>Bueno para consultas complejas</td> <td>Rápido en operaciones OO</td> <td>Overhead por abstracción</td> </tr> <tr> <td><strong>Escalabilidad</strong></td> <td>Vertical (mejor con ACID)</td> <td>Horizontal (menos común)</td> <td>Depende de la implementación</td> </tr> <tr> <td><strong>Ventajas</strong></td> <td>- ACID garantizado - Amplio soporte - Madurez</td> <td>- Sin "impedance mismatch" - Mejor integración OO</td> <td>- Reduce código SQL - Portabilidad entre BD</td> </tr> <tr> <td><strong>Inconvenientes</strong></td> <td>- Menos flexible para datos complejos - Joins costosos</td> <td>- Menos adopción - Limitado para informes</td> <td>- Consultas ineficientes - Curva de aprendizaje</td> </tr> <tr> <td><strong>Mejor uso</strong></td> <td>Datos estructurados, transacciones</td> <td>Apps con dominio OO complejo</td> <td>Proyectos OO con BD relacional</td> </tr> </tbody> </table> <h2 id="pildoras-informaticas-relacionadas">Píldoras informáticas relacionadas<a class="headerlink" href="#pildoras-informaticas-relacionadas" title="Permanent link">¶</a></h2> <ul> <li><a href="https://www.youtube.com/watch?v=sk0YuQPaPWA">Curso Spring. Hibernate, acceso a datos. Vídeo 46</a></li> <li><a href="https://www.youtube.com/watch?v=cFLsynl91B0">Curso Java. Acceso a BBDD. JDBC I. Vídeo 201</a></li> <li><a href="https://youtube.com/playlist?list=PLTd5ehIj0goPcnQs34i0F-Kgp5JHX8UUv&amp;si=wjWSZ7tnYadwONFy">JPA + Hibernate</a></li> </ul> <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" frameborder="0" height="315" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/videoseries?si=AEnj5v1FyQu9y8-V&amp;list=PLU8oAlHdN5BktAXdEVCLUYzvDyqRQJ2lk" title="YouTube video player" width="100%"></iframe> </div> <aside class="md-source-file"> <span class="md-source-file__fact"> <span class="md-icon" title="Última actualización"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="29 de diciembre de 2025 19:46:58 UTC">29 de diciembre de 2025</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Volver al principio </button> </main> <footer class="md-footer"> <nav aria-label="Pie" class="md-footer__inner md-grid"> <a aria-label="Anterior: T04 Calculadora JavaFX" class="md-footer__link md-footer__link--prev" href="../UD10/UD10_T04_DAO_ES.html"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Anterior </span> <div class="md-ellipsis"> T04 Calculadora JavaFX </div> </div> </a> <a aria-label="Siguiente: Ejercicios" class="md-footer__link md-footer__link--next" href="UD11_ejercicios_ES.html"> <div class="md-footer__title"> <span class="md-footer__direction"> Siguiente </span> <div class="md-ellipsis"> Ejercicios </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> © 2025 David Martínez licensed under CC BY-NC-SA 4.0 </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> <div class="md-social"> <a class="md-social__link" href="https://youtube.com/@martinezpenya" rel="noopener" target="_blank" title="youtube.com"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M23.498 6.186a3.02 3.02 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.02 3.02 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.02 3.02 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.02 3.02 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814M9.545 15.568V8.432L15.818 12z"></path></svg> </a> <a class="md-social__link" href="https://linkedin.com/in/martinezpenya" rel="noopener" target="_blank" title="linkedin.com"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg> </a> <a class="md-social__link" href="https://github.com/martinezpenya" rel="noopener" target="_blank" title="github.com"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> <a class="md-social__link" href="https://buymeacoffee.com/martinezpenya" rel="noopener" target="_blank" title="Buy me a coffee"> <svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M64 64c0-17.7 14.3-32 32-32h352c70.7 0 128 57.3 128 128s-57.3 128-128 128c0 53-43 96-96 96H160c-53 0-96-43-96-96zm448 96c0-35.3-28.7-64-64-64v128c35.3 0 64-28.7 64-64M64 448h384c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-17.7 0-32-14.3-32-32s14.3-32 32-32"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["header.autohide", "content.action.edit", "content.code.copy", "content.code.select", "content.code.anotate", "toc.follow", "toc.integrate", "navigation.top", "navigation.footer"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script> <script src="../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../js/mathjax-config.js"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg-full.js"></script> </body> </html>